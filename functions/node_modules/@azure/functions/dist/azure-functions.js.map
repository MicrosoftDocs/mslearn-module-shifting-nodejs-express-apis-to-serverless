{"version":3,"file":"azure-functions.js","mappings":";;;;;;;;;;;AAAA,sDAAsD;AACtD,kCAAkC;;;;;;;;;;;;;;;AAYlC,MAAa,iBAAiB;IAW1B,YAAY,IAA4B;;QAFxC,oDAA4B;QAGxB,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;QAClB,MAAM,cAAc,GAAG,SAAS,CAAC;QACjC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,IAAI,cAAc,CAAC;QACxD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,IAAI,cAAc,CAAC;QACxD,IAAI,CAAC,WAAW,GAAG,IAAI,4BAA4B,EAAE,CAAC;QACtD,IAAI,CAAC,YAAY,GAAG,IAAI,6BAA6B,EAAE,CAAC;QACxD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QACtC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QACtC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;QAC5C,IAAI,CAAC,OAAO,GAAG;YACX,OAAO,EAAE,WAAI,CAAC,OAAO,0CAAE,OAAO,KAAI;gBAC9B,IAAI,EAAE,cAAc;gBACpB,IAAI,EAAE,cAAc;aACvB;YACD,MAAM,EAAE,UAAI,CAAC,OAAO,0CAAE,MAAM;YAC5B,WAAW,EAAE,WAAI,CAAC,OAAO,0CAAE,WAAW,KAAI,EAAE;YAC5C,YAAY,EAAE,WAAI,CAAC,OAAO,0CAAE,YAAY,KAAI,EAAE;SACjD,CAAC;QACF,2BAAI,qCAAmB,IAAI,CAAC,UAAU,IAAI,kBAAkB,OAAC;IACjE,CAAC;IAED,GAAG,CAAC,GAAG,IAAe;QAClB,2BAAI,yCAAgB,MAApB,IAAI,EAAiB,aAAa,EAAE,GAAG,IAAI,CAAC,CAAC;IACjD,CAAC;IAED,KAAK,CAAC,GAAG,IAAe;QACpB,2BAAI,yCAAgB,MAApB,IAAI,EAAiB,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;IAC3C,CAAC;IAED,KAAK,CAAC,GAAG,IAAe;QACpB,2BAAI,yCAAgB,MAApB,IAAI,EAAiB,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;IAC3C,CAAC;IAED,IAAI,CAAC,GAAG,IAAe;QACnB,2BAAI,yCAAgB,MAApB,IAAI,EAAiB,aAAa,EAAE,GAAG,IAAI,CAAC,CAAC;IACjD,CAAC;IAED,IAAI,CAAC,GAAG,IAAe;QACnB,2BAAI,yCAAgB,MAApB,IAAI,EAAiB,SAAS,EAAE,GAAG,IAAI,CAAC,CAAC;IAC7C,CAAC;IAED,KAAK,CAAC,GAAG,IAAe;QACpB,2BAAI,yCAAgB,MAApB,IAAI,EAAiB,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;IAC3C,CAAC;CACJ;AAxDD,8CAwDC;;AAED,MAAM,4BAA4B;IAAlC;QACI,+CAAmC,EAAE,EAAC;IAS1C,CAAC;IARG,GAAG,CAAC,WAAyC;QACzC,MAAM,IAAI,GAAG,OAAO,WAAW,KAAK,QAAQ,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC;QAC9E,OAAO,2BAAI,4CAAQ,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;IACD,GAAG,CAAC,WAAyC,EAAE,KAAc;QACzD,MAAM,IAAI,GAAG,OAAO,WAAW,KAAK,QAAQ,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC;QAC9E,2BAAI,4CAAQ,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;IAC/B,CAAC;CACJ;;AAED,MAAM,6BAA6B;IAAnC;QACI,iDAAoC,EAAE,EAAC;IAS3C,CAAC;IARG,GAAG,CAAC,YAA2C;QAC3C,MAAM,IAAI,GAAG,OAAO,YAAY,KAAK,QAAQ,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC;QACjF,OAAO,2BAAI,8CAAS,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC;IACD,GAAG,CAAC,YAA2C,EAAE,KAAc;QAC3D,MAAM,IAAI,GAAG,OAAO,YAAY,KAAK,QAAQ,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC;QACjF,2BAAI,8CAAS,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;IAChC,CAAC;CACJ;;AAED,SAAS,kBAAkB,CAAC,KAAqB,EAAE,GAAG,IAAe;IACjE,QAAQ,KAAK,EAAE;QACX,KAAK,OAAO;YACR,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC;YACvB,MAAM;QACV,KAAK,OAAO;YACR,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC;YACvB,MAAM;QACV,KAAK,aAAa;YACd,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;YACtB,MAAM;QACV,KAAK,SAAS;YACV,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;YACtB,MAAM;QACV,KAAK,UAAU,CAAC;QAChB,KAAK,OAAO;YACR,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC;YACvB,MAAM;QACV;YACI,OAAO,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC;KAC5B;AACL,CAAC;;;;;;;;;;;;ACpHD,sDAAsD;AACtD,kCAAkC;;;;;;;;;;;;;;;;;;;;;;;;AAYlC,uDAA8B;AAC9B,iFAA+C;AAC/C,yHAA+D;AAC/D,sHAAuF;AACvF,8IAA6E;AAC7E,4HAAiE;AACjE,6GAA4D;AAC5D,uGAAmD;AACnD,sHAA6D;AAC7D,wEAA6C;AAC7C,yGAAwD;AACxD,6FAA6E;AAC7E,uFAAuE;AAEvE,MAAa,eAAe;IAOxB,YAAY,OAA8B;;QAN1C,kCAAU,KAAK,EAAC;QAChB,2CAAgC;QAChC,gDAAsB;QACtB,4CAA0C;QAC1C,+CAAqB;QAGjB,2BAAI,4BAAY,OAAO,OAAC;QACxB,2BAAI,iCAAiB,yBAAW,EAAC,OAAO,CAAC,QAAQ,EAAE,MAAM,CAAC,OAAC;QAC3D,2BAAI,6BAAa,yBAAW,EAAC,OAAO,CAAC,QAAQ,EAAE,UAAU,CAAC,OAAC;QAC3D,MAAM,cAAc,GAAG,0BAAY,EAC/B,MAAM,CAAC,MAAM,CAAC,2BAAI,iCAAU,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,yBAAS,EAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAC5D,gBAAgB,CACnB,CAAC;QACF,2BAAI,gCAAgB,yBAAW,EAAC,cAAc,EAAE,MAAM,CAAC,OAAC;IAC5D,CAAC;IAED,4DAA4D;IACtD,YAAY;;YACd,MAAM,GAAG,GAAG,2BAAI,gCAAS,CAAC,OAAO,CAAC;YAElC,MAAM,OAAO,GAAG,IAAI,qCAAiB,CAAC;gBAClC,YAAY,EAAE,yBAAW,EAAC,2BAAI,gCAAS,EAAE,cAAc,CAAC;gBACxD,YAAY,EAAE,2BAAI,qCAAc;gBAChC,UAAU,EAAE,CAAC,KAAkB,EAAE,GAAG,IAAe,EAAE,EAAE,CAAC,2BAAI,4DAAS,MAAb,IAAI,EAAU,KAAK,EAAE,GAAG,IAAI,CAAC;gBACrF,YAAY,EAAE,wCAAmB,EAAC,GAAG,CAAC,YAAY,CAAC;gBACnD,YAAY,EAAE,wCAAmB,EAAC,GAAG,CAAC,YAAY,CAAC;gBACnD,eAAe,EAAE,mDAAsB,EAAC,GAAG,CAAC,eAAe,EAAE,2BAAI,oCAAa,CAAC;gBAC/E,OAAO,EAAE,qCAAe,EAAC,2BAAI,iCAAU,CAAC;aAC3C,CAAC,CAAC;YAEH,MAAM,MAAM,GAAc,EAAE,CAAC;YAC7B,IAAI,GAAG,CAAC,SAAS,EAAE;gBACf,KAAK,MAAM,OAAO,IAAI,GAAG,CAAC,SAAS,EAAE;oBACjC,MAAM,WAAW,GAAG,yBAAW,EAAC,OAAO,EAAE,MAAM,CAAC,CAAC;oBACjD,IAAI,KAAK,GAAY,uCAAgB,EAAC,OAAO,CAAC,IAAI,CAAC,CAAC;oBAEpD,MAAM,UAAU,GAAG,2BAAI,iCAAU,CAAC,WAAW,CAAC,CAAC;oBAC/C,IAAI,CAAC,UAAU,EAAE;wBACb,MAAM,IAAI,0BAAiB,CACvB,2BAA2B,WAAW,kBAAkB,MAAM,CAAC,IAAI,CAAC,2BAAI,iCAAU,CAAC,CAAC,IAAI,CACpF,IAAI,CACP,IAAI,CACR,CAAC;qBACL;oBACD,MAAM,WAAW,GAAG,UAAU,CAAC,IAAI,CAAC;oBACpC,IAAI,8BAAc,EAAC,WAAW,CAAC,EAAE;wBAC7B,KAAK,GAAG,kCAAgB,EAAC,KAAK,CAAC,CAAC;qBACnC;oBAED,IAAI,yBAAS,EAAC,WAAW,CAAC,EAAE;wBACxB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;qBACtB;yBAAM;wBACH,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;qBAC/C;iBACJ;aACJ;YAED,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC;QAC/B,CAAC;KAAA;IAEK,cAAc,CAChB,OAA0B,EAC1B,MAAiB,EACjB,OAAmC;;YAEnC,IAAI;gBACA,OAAO,MAAM,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC;aAC7D;oBAAS;gBACN,2BAAI,2BAAW,IAAI,OAAC;aACvB;QACL,CAAC;KAAA;IAEK,WAAW,CAAC,OAA0B,EAAE,MAAe;;YACzD,MAAM,QAAQ,GAA0B,EAAE,YAAY,EAAE,2BAAI,gCAAS,CAAC,YAAY,EAAE,CAAC;YAErF,QAAQ,CAAC,UAAU,GAAG,EAAE,CAAC;YACzB,IAAI,eAAe,GAAG,KAAK,CAAC;YAC5B,KAAK,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,2BAAI,iCAAU,CAAC,EAAE;gBAC1D,IAAI,OAAO,CAAC,SAAS,KAAK,KAAK,EAAE;oBAC7B,IAAI,IAAI,KAAK,4BAAgB,EAAE;wBAC3B,QAAQ,CAAC,WAAW,GAAG,MAAM,2BAAI,kEAAe,MAAnB,IAAI,EAAgB,OAAO,EAAE,MAAM,CAAC,CAAC;wBAClE,eAAe,GAAG,IAAI,CAAC;qBAC1B;yBAAM;wBACH,MAAM,WAAW,GAAG,MAAM,2BAAI,kEAAe,MAAnB,IAAI,EAAgB,OAAO,EAAE,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;wBACvF,IAAI,uBAAS,EAAC,WAAW,CAAC,EAAE;4BACxB,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,CAAC;yBACzD;qBACJ;iBACJ;aACJ;YAED,iFAAiF;YACjF,0FAA0F;YAC1F,4FAA4F;YAC5F,yHAAyH;YACzH,IAAI,CAAC,eAAe,IAAI,CAAC,6BAAa,EAAC,2BAAI,oCAAa,CAAC,EAAE;gBACvD,QAAQ,CAAC,WAAW,GAAG,mCAAc,EAAC,MAAM,CAAC,CAAC;aACjD;YAED,OAAO,QAAQ,CAAC;QACpB,CAAC;KAAA;CA2BJ;AAjID,0CAiIC;gVAzBwB,OAAuB,EAAE,KAAc;;;QACxD,IAAI,cAAO,CAAC,IAAI,0CAAE,WAAW,EAAE,MAAK,MAAM,EAAE;YACxC,OAAO,yBAAS,EAAC,KAAK,CAAC,CAAC;SAC3B;aAAM;YACH,OAAO,mCAAc,EAAC,KAAK,CAAC,CAAC;SAChC;;wDAGA,KAAkB,EAAE,WAA2B,EAAE,GAAG,IAAe;IACpE,2BAAI,gCAAS,CAAC,GAAG,CAAC,KAAK,EAAE,WAAW,EAAE,iBAAM,EAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAC3D,CAAC,mEAEU,KAAkB,EAAE,GAAG,IAAe;IAC7C,2BAAI,wDAAK,MAAT,IAAI,EAAM,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC,CAAC;AACxC,CAAC,+DAEQ,KAAkB,EAAE,GAAG,IAAe;IAC3C,IAAI,2BAAI,+BAAQ,IAAI,2BAAI,gCAAS,CAAC,KAAK,KAAK,qBAAqB,EAAE;QAC/D,IAAI,WAAW,GACX,4JAA4J,CAAC;QACjK,WAAW,IAAI,kBAAkB,2BAAI,qCAAc,oBAAoB,2BAAI,gCAAS,CAAC,YAAY,GAAG,CAAC;QACrG,2BAAI,8DAAW,MAAf,IAAI,EAAY,SAAS,EAAE,WAAW,CAAC,CAAC;KAC3C;IACD,2BAAI,wDAAK,MAAT,IAAI,EAAM,KAAK,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,CAAC;AACtC,CAAC;;;;;;;;;;;;AC3JL,sDAAsD;AACtD,kCAAkC;;;AAElC,+FAAiD;AAAxC,sHAAW;AACpB,kGAAmD;AAA1C,yHAAY;AACrB,uGAAwD;AAA/C,wIAAiB;AAE1B,MAAM,aAAa,GAA2B,EAAE,CAAC;AACjD;;;;;;;GAOG;AACH,SAAgB,cAAc,CAC1B,OAAU,EACV,MAAc;IAEd,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;QACf,IAAI,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC;QAC/B,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,EAAE;YAC3D,WAAW,IAAI,MAAM,CAAC;SACzB;QACD,IAAI,KAAK,GAAG,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC5C,KAAK,IAAI,CAAC,CAAC;QACX,aAAa,CAAC,WAAW,CAAC,GAAG,KAAK,CAAC;QACnC,OAAO,CAAC,IAAI,GAAG,WAAW,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;KACjD;IACD,OAA6B,OAAO,CAAC;AACzC,CAAC;AAfD,wCAeC;;;;;;;;;;;;AC/BD,sDAAsD;AACtD,kCAAkC;;;;;;;;;;;;;;AAwBlC,iFAAwD;AACxD,mHAA2D;AAC3D,mGAAoD;AACpD,sEAAmC;AACnC,yEAAqC;AACrC,6FAA8C;AAC9C,qHAA8D;AAE9D,8FAA6C;AAE7C,MAAM,gBAAgB;IAAtB;QACI,SAAI,GAAG,kBAAkB,CAAC;QAC1B,YAAO,GAAG,mBAAO,CAAC;IAItB,CAAC;IAHG,kBAAkB,CAAC,OAA8B;QAC7C,OAAO,IAAI,iCAAe,CAAC,OAAO,CAAC,CAAC;IACxC,CAAC;CACJ;AAED,IAAI,QAAQ,GAAG,KAAK,CAAC;AACrB,SAAS,KAAK;IACV,MAAM,OAAO,GAAG,yCAAiB,GAAE,CAAC;IACpC,IAAI,CAAC,OAAO,EAAE;QACV,OAAO,CAAC,IAAI,CACR,4IAA4I,CAC/I,CAAC;KACL;SAAM;QACH,OAAO,CAAC,mBAAmB,CAAC,IAAI,gBAAgB,EAAE,CAAC,CAAC;KACvD;IACD,QAAQ,GAAG,IAAI,CAAC;AACpB,CAAC;AAED,SAAS,oBAAoB,CACzB,gBAAmD,EACnD,MAAkB;IAElB,MAAM,OAAO,GACT,OAAO,gBAAgB,KAAK,UAAU,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,gBAAgB,EAAE,CAAC,CAAC,CAAC,gBAAgB,CAAC;IAC9F,OAAO,CAAC,OAAO,GAAG,CAAC,MAAM,CAAC,CAAC;IAC3B,OAAO,OAAO,CAAC;AACnB,CAAC;AAED,SAAS,uBAAuB,CAC5B,OAAU,EACV,aAAiH;IAEjH,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,WAAW,EAAE,YAAY,KAAwB,OAAO,EAA1B,cAAc,UAAK,OAAO,EAAzF,+DAA+E,CAAU,CAAC;IAChG,OAAO;QACH,OAAO,EAAE,OAAO,aAAP,OAAO,cAAP,OAAO,GAAI,aAAa,CAAC,cAAc,CAAC;QACjD,MAAM,EAAE,GAAG;QACX,WAAW;QACX,YAAY;QACZ,OAAO;KACV,CAAC;AACN,CAAC;AAED,SAAgB,GAAG,CAAC,IAAY,EAAE,gBAAyD;IACvF,IAAI,CAAC,IAAI,EAAE,oBAAoB,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC,CAAC;AAC9D,CAAC;AAFD,kBAEC;AAED,SAAgB,GAAG,CAAC,IAAY,EAAE,gBAAyD;IACvF,IAAI,CAAC,IAAI,EAAE,oBAAoB,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC,CAAC;AAC9D,CAAC;AAFD,kBAEC;AAED,SAAgB,IAAI,CAAC,IAAY,EAAE,gBAAyD;IACxF,IAAI,CAAC,IAAI,EAAE,oBAAoB,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC,CAAC;AAC/D,CAAC;AAFD,oBAEC;AAED,SAAgB,KAAK,CAAC,IAAY,EAAE,gBAAyD;IACzF,IAAI,CAAC,IAAI,EAAE,oBAAoB,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC,CAAC;AAChE,CAAC;AAFD,sBAEC;AAED,SAAgB,aAAa,CAAC,IAAY,EAAE,gBAAyD;IACjG,IAAI,CAAC,IAAI,EAAE,oBAAoB,CAAC,gBAAgB,EAAE,QAAQ,CAAC,CAAC,CAAC;AACjE,CAAC;AAFD,sCAEC;AAED,SAAgB,IAAI,CAAC,IAAY,EAAE,OAA4B;IAC3D,OAAO,CAAC,MAAM,KAAd,OAAO,CAAC,MAAM,GAAK,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,EAAC;IACnC,OAAO,CAAC,IAAI,EAAE,uBAAuB,CAAC,OAAO,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;AAClE,CAAC;AAHD,oBAGC;AAED,SAAgB,KAAK,CAAC,IAAY,EAAE,OAA6B;IAC7D,OAAO,CAAC,IAAI,EAAE,uBAAuB,CAAC,OAAO,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;AACnE,CAAC;AAFD,sBAEC;AAED,SAAgB,WAAW,CAAC,IAAY,EAAE,OAAmC;IACzE,OAAO,CAAC,IAAI,EAAE,uBAAuB,CAAC,OAAO,EAAE,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;AACzE,CAAC;AAFD,kCAEC;AAED,SAAgB,YAAY,CAAC,IAAY,EAAE,OAAoC;IAC3E,OAAO,CAAC,IAAI,EAAE,uBAAuB,CAAC,OAAO,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC;AAC1E,CAAC;AAFD,oCAEC;AAED,SAAgB,eAAe,CAAC,IAAY,EAAE,OAAuC;IACjF,OAAO,CAAC,IAAI,EAAE,uBAAuB,CAAC,OAAO,EAAE,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;AAC7E,CAAC;AAFD,0CAEC;AAED,SAAgB,eAAe,CAAC,IAAY,EAAE,OAAuC;IACjF,OAAO,CAAC,IAAI,EAAE,uBAAuB,CAAC,OAAO,EAAE,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;AAC7E,CAAC;AAFD,0CAEC;AAED,SAAgB,QAAQ,CAAC,IAAY,EAAE,OAAgC;IACnE,OAAO,CAAC,IAAI,EAAE,uBAAuB,CAAC,OAAO,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AACtE,CAAC;AAFD,4BAEC;AAED,SAAgB,SAAS,CAAC,IAAY,EAAE,OAAiC;IACrE,OAAO,CAAC,IAAI,EAAE,uBAAuB,CAAC,OAAO,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;AACvE,CAAC;AAFD,8BAEC;AAED,SAAgB,QAAQ,CAAC,IAAY,EAAE,OAAgC;IACnE,iEAAiE;IACjE,OAAO,CAAC,IAAI,EAAE,uBAAuB,CAAC,OAAO,EAAO,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC3E,CAAC;AAHD,4BAGC;AAED,SAAgB,MAAM,CAAC,IAAY,EAAE,OAA8B;IAC/D,OAAO,CAAC,IAAI,EAAE,uBAAuB,CAAC,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AACpE,CAAC;AAFD,wBAEC;AAED,SAAgB,OAAO,CAAC,IAAY,EAAE,OAA+B;IACjE,IAAI,CAAC,QAAQ,EAAE;QACX,KAAK,EAAE,CAAC;KACX;IAED,MAAM,QAAQ,GAA6C,EAAE,CAAC;IAE9D,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;IAChC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,mCACf,OAAO,KACV,SAAS,EAAE,IAAI,EACf,IAAI,EAAE,yBAAS,EAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,GAAG,SAAS,GAC1E,CAAC;IAEF,IAAI,OAAO,CAAC,WAAW,EAAE;QACrB,KAAK,MAAM,KAAK,IAAI,OAAO,CAAC,WAAW,EAAE;YACrC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,mCACb,KAAK,KACR,SAAS,EAAE,IAAI,GAClB,CAAC;SACL;KACJ;IAED,IAAI,OAAO,CAAC,MAAM,EAAE;QAChB,QAAQ,CAAC,4BAAgB,CAAC,mCACnB,OAAO,CAAC,MAAM,KACjB,SAAS,EAAE,KAAK,GACnB,CAAC;KACL;IAED,IAAI,OAAO,CAAC,YAAY,EAAE;QACtB,KAAK,MAAM,MAAM,IAAI,OAAO,CAAC,YAAY,EAAE;YACvC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,mCACd,MAAM,KACT,SAAS,EAAE,KAAK,GACnB,CAAC;SACL;KACJ;IAED,IAAI,YAAmD,CAAC;IACxD,IAAI,OAAO,CAAC,KAAK,EAAE;QACf,YAAY,mCACL,OAAO,CAAC,KAAK,KAChB,aAAa,EAAE,OAAO,CAAC,KAAK,CAAC,QAAQ,EACrC,aAAa,EAAE,iCAAa,EAA0B,OAAO,CAAC,KAAM,CAAC,aAAa,EAAE,qBAAqB,CAAC,EAC1G,eAAe,EAAE,iCAAa,EACO,OAAO,CAAC,KAAM,CAAC,eAAe,EAC/D,uBAAuB,CAC1B,EACD,eAAe,EAAE,iCAAa,EACO,OAAO,CAAC,KAAM,CAAC,eAAe,EAC/D,uBAAuB,CAC1B,GACJ,CAAC;KACL;IAED,MAAM,OAAO,GAAG,yCAAiB,GAAE,CAAC;IACpC,IAAI,CAAC,OAAO,EAAE;QACV,OAAO,CAAC,IAAI,CACR,gDAAgD,IAAI,2DAA2D,CAClH,CAAC;KACL;SAAM;QACH,OAAO,CAAC,gBAAgB,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAoB,OAAO,CAAC,OAAO,CAAC,CAAC;KACjG;AACL,CAAC;AAhED,0BAgEC;;;;;;;;;;;;AC9MD,sDAAsD;AACtD,kCAAkC;;;AAErB,eAAO,GAAG,OAAO,CAAC;AAElB,wBAAgB,GAAG,SAAS,CAAC;;;;;;;;;;;;ACL1C,sDAAsD;AACtD,kCAAkC;;;AAIlC,kFAAgD;AAChD,8FAA+C;AAC/C,wFAA6D;AAE7D,SAAgB,eAAe,CAAC,QAA2D;IACvF,IAAI,OAAoC,CAAC;IACzC,IAAI,aAAyC,CAAC;IAC9C,MAAM,WAAW,GAAoB,EAAE,CAAC;IACxC,MAAM,YAAY,GAAqB,EAAE,CAAC;IAC1C,KAAK,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,0BAAY,EAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,EAAE;QAC9E,IAAI,yBAAS,EAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YACzB,OAAO,GAAG,cAAc,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;SAC3C;aAAM,IAAI,IAAI,KAAK,4BAAgB,EAAE;YAClC,aAAa,GAAG,cAAc,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;SACjD;aAAM,IAAI,OAAO,CAAC,SAAS,KAAK,IAAI,EAAE;YACnC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;SACnD;aAAM,IAAI,OAAO,CAAC,SAAS,KAAK,KAAK,EAAE;YACpC,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;SACpD;KACJ;IACD,OAAO;QACH,OAAO,EAAE,0BAAY,EAAC,OAAO,EAAE,SAAS,CAAC;QACzC,MAAM,EAAE,aAAa;QACrB,WAAW;QACX,YAAY;KACf,CAAC;AACN,CAAC;AAtBD,0CAsBC;AAED,SAAS,cAAc,CAAC,IAAY,EAAE,OAAuB;IACzD,uCACO,OAAO,KACV,IAAI,EAAE,yBAAW,EAAC,OAAO,EAAE,MAAM,CAAC,EAClC,IAAI,IACN;AACN,CAAC;;;;;;;;;;;;ACvCD,sDAAsD;AACtD,kCAAkC;;;AAIlC,wFAAkE;AAElE,SAAgB,mBAAmB,CAAC,YAAgD;IAChF,IAAI,CAAC,YAAY,EAAE;QACf,OAAO,SAAS,CAAC;KACpB;SAAM;QACH,MAAM,MAAM,GAAiB;YACzB,UAAU,EAAE,yBAAW,EAAC,YAAY,EAAE,YAAY,CAAC;YACnD,aAAa,EAAE,yBAAW,EAAC,YAAY,EAAE,eAAe,CAAC;SAC5D,CAAC;QACF,IAAI,YAAY,CAAC,SAAS,EAAE;YACxB,MAAM,CAAC,SAAS,GAAG,gBAAgB,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;SAC/D;QACD,OAAO,MAAM,CAAC;KACjB;AACL,CAAC;AAbD,kDAaC;AAED,SAAS,gBAAgB,CAAC,SAAuB;IAC7C,MAAM,MAAM,GAAc,EAAE,CAAC;IAC7B,+BAAiB,EAAC,SAAS,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;IAChD,+BAAiB,EAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC;IAC/C,+BAAiB,EAAC,SAAS,EAAE,MAAM,EAAE,YAAY,CAAC,CAAC;IACnD,OAAO,MAAM,CAAC;AAClB,CAAC;AAED,SAAgB,mBAAmB,CAAC,YAAgD;IAChF,IAAI,CAAC,YAAY,EAAE;QACf,OAAO,SAAS,CAAC;KACpB;SAAM;QACH,MAAM,MAAM,GAAiB,EAAE,CAAC;QAChC,+BAAiB,EAAC,YAAY,EAAE,MAAM,EAAE,aAAa,CAAC,CAAC;QACvD,+BAAiB,EAAC,YAAY,EAAE,MAAM,EAAE,YAAY,CAAC,CAAC;QACtD,IAAI,YAAY,CAAC,UAAU,EAAE;YACzB,MAAM,CAAC,UAAU,GAAG,YAAY,CAAC,UAAU,CAAC;SAC/C;QACD,OAAO,MAAM,CAAC;KACjB;AACL,CAAC;AAZD,kDAYC;;;;;;;;;;;;AC1CD,sDAAsD;AACtD,kCAAkC;;;AAIlC,SAAgB,mBAAmB,CAC/B,eAAqE,EACrE,eAA+C;;IAE/C,IAAI,SAAS,GAA2B,EAAE,CAAC;IAC3C,IAAI,eAAe,IAAI,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;QAC5D,KAAK,MAAM,GAAG,IAAI,eAAe,EAAE;YAC/B,SAAS,CAAC,GAAG,CAAC,GAAG,sBAAe,CAAC,GAAG,CAAC,0CAAE,KAAK,KAAI,EAAE,CAAC;SACtD;KACJ;SAAM,IAAI,eAAe,IAAI,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;QACnE,SAAS,GAAG,eAAe,CAAC;KAC/B;IACD,OAAO,SAAS,CAAC;AACrB,CAAC;AAbD,kDAaC;;;;;;;;;;;;AClBD,sDAAsD;AACtD,kCAAkC;;;AAIlC,8FAAmE;AACnE,iHAAsD;AACtD,kGAAiE;AAEjE,SAAgB,sBAAsB,CAClC,eAAgE,EAChE,WAAmB;IAEnB,wFAAwF;IACxF,wEAAwE;IACxE,2FAA2F;IAC3F,8EAA8E;IAC9E,IAAI,CAAC,eAAe,IAAI,6BAAa,EAAC,WAAW,CAAC,IAAI,8BAAc,EAAC,WAAW,CAAC,EAAE;QAC/E,OAAO,SAAS,CAAC;KACpB;SAAM;QACH,MAAM,MAAM,GAAoB,EAAE,CAAC;QACnC,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE;YACxD,MAAM,CAAC,gCAAc,EAAC,GAAG,CAAC,CAAC,GAAG,kCAAgB,EAAC,uCAAgB,EAAC,KAAK,CAAC,CAAC,CAAC;SAC3E;QACD,OAAO,MAAM,CAAC;KACjB;AACL,CAAC;AAjBD,wDAiBC;;;;;;;;;;;;AC1BD,sDAAsD;AACtD,kCAAkC;;;AAGlC,kGAAkD;AAClD,wFAA6C;AAE7C,SAAgB,gBAAgB,CAAC,IAAqC;IAClE,IAAI,CAAC,IAAI,EAAE;QACP,OAAO,SAAS,CAAC;KACpB;SAAM,IAAI,uBAAS,EAAC,IAAI,CAAC,MAAM,CAAC,EAAE;QAC/B,OAAO,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KACpC;SAAM,IAAI,uBAAS,EAAC,IAAI,CAAC,IAAI,CAAC,EAAE;QAC7B,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAChC;SAAM,IAAI,uBAAS,EAAC,IAAI,CAAC,KAAK,CAAC,EAAE;QAC9B,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAClC;SAAM,IAAI,uBAAS,EAAC,IAAI,CAAC,MAAM,CAAC,EAAE;QAC/B,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KACnC;SAAM,IAAI,uBAAS,EAAC,IAAI,CAAC,IAAI,CAAC,EAAE;QAC7B,OAAO,IAAI,yBAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KACrC;SAAM,IAAI,uBAAS,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE;QAC5B,OAAO,IAAI,CAAC,GAAG,CAAC;KACnB;SAAM,IAAI,uBAAS,EAAC,IAAI,CAAC,MAAM,CAAC,EAAE;QAC/B,OAAO,IAAI,CAAC,MAAM,CAAC;KACtB;SAAM,IAAI,IAAI,CAAC,eAAe,IAAI,uBAAS,EAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,EAAE;QACtE,OAAO,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;KAChE;SAAM,IAAI,IAAI,CAAC,gBAAgB,IAAI,uBAAS,EAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,EAAE;QACzE,OAAO,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;KACzD;SAAM,IAAI,IAAI,CAAC,gBAAgB,IAAI,uBAAS,EAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,EAAE;QACzE,OAAO,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC;KACvC;SAAM,IAAI,IAAI,CAAC,gBAAgB,IAAI,uBAAS,EAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,EAAE;QACzE,OAAO,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC;KACvC;SAAM;QACH,OAAO,SAAS,CAAC;KACpB;AACL,CAAC;AA5BD,4CA4BC;AAED,SAAS,YAAY,CAAC,IAAY;IAC9B,IAAI;QACA,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KAC3B;IAAC,WAAM;QACJ,OAAO,IAAI,CAAC;KACf;AACL,CAAC;;;;;;;;;;;;AC3CD,sDAAsD;AACtD,kCAAkC;;;AAElC,SAAgB,gBAAgB,CAAC,IAAa;IAC1C,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,IAAI,EAAE;QAC3C,OAAO,IAAI,CAAC;KACf;SAAM,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;QAC5B,OAAO,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;KACrC;SAAM;QACH,MAAM,MAAM,GAA4B,EAAE,CAAC;QAC3C,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAC7C,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAC;SACzD;QACD,OAAO,MAAM,CAAC;KACjB;AACL,CAAC;AAZD,4CAYC;AAED,SAAgB,cAAc,CAAC,GAAW;IACtC,OAAO,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACtD,CAAC;AAFD,wCAEC;;;;;;;;;;;;ACnBD,sDAAsD;AACtD,kCAAkC;;;AAIlC,yEAA8C;AAC9C,wFAA6C;AAE7C,SAAgB,aAAa,CAAC,QAAuC,EAAE,YAAoB;IACvF,IAAI,uBAAS,EAAC,QAAQ,CAAC,EAAE;QACrB,IAAI;YACA,IAAI,kBAAsC,CAAC;YAC3C,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;gBAC9B,MAAM,OAAO,GAAG,CAAC,QAAQ,CAAC,OAAO,IAAI,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC;gBACrE,MAAM,OAAO,GAAG,CAAC,QAAQ,CAAC,OAAO,IAAI,CAAC,CAAC,GAAG,OAAO,GAAG,EAAE,CAAC;gBACvD,kBAAkB,GAAG,CAAC,QAAQ,CAAC,YAAY,IAAI,CAAC,CAAC,GAAG,OAAO,GAAG,IAAI,CAAC;aACtE;iBAAM,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;gBACrC,kBAAkB,GAAG,QAAQ,CAAC;aACjC;YAED,IAAI,uBAAS,EAAC,kBAAkB,CAAC,IAAI,kBAAkB,IAAI,CAAC,EAAE;gBAC1D,OAAO;oBACH,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,kBAAkB,GAAG,IAAI,CAAC;iBACjD,CAAC;aACL;SACJ;QAAC,WAAM;YACJ,eAAe;SAClB;QAED,MAAM,IAAI,0BAAiB,CACvB,8DAA8D,OAAO,QAAQ,6BAA6B,YAAY,IAAI,CAC7H,CAAC;KACL;IAED,OAAO,SAAS,CAAC;AACrB,CAAC;AA3BD,sCA2BC;;;;;;;;;;;;ACnCD,sDAAsD;AACtD,kCAAkC;;;;;;;;;;;;AAGlC,yEAA8C;AAC9C,qGAAoD;AACpD,8GAAoD;AACpD,2GAAkD;AAElD,SAAsB,SAAS,CAAC,IAAa;;QACzC,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,SAAS,EAAE;YACrC,OAAO,IAAI,CAAC;SACf;aAAM,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;YACjC,MAAM,IAAI,0BAAiB,CACvB,0GAA0G,CAC7G,CAAC;SACL;QAED,MAAM,QAAQ,GAAG,IAAI,YAAY,2BAAY,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,2BAAY,CAAC,IAAI,CAAC,CAAC;QAC9E,MAAM,WAAW,GAAgB,EAAE,CAAC;QACpC,WAAW,CAAC,UAAU,GAAG,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QAEpD,WAAW,CAAC,OAAO,GAAG,EAAE,CAAC;QACzB,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE;YACnD,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;SACpC;QAED,WAAW,CAAC,OAAO,GAAG,EAAE,CAAC;QACzB,KAAK,MAAM,MAAM,IAAI,QAAQ,CAAC,OAAO,EAAE;YACnC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,qCAAe,EAAC,MAAM,CAAC,CAAC,CAAC;SACrD;QAED,WAAW,CAAC,wBAAwB,GAAG,QAAQ,CAAC,wBAAwB,CAAC;QAEzE,MAAM,SAAS,GAAG,MAAM,QAAQ,CAAC,WAAW,EAAE,CAAC;QAC/C,WAAW,CAAC,IAAI,GAAG,mCAAc,EAAC,SAAS,CAAC,CAAC;QAE7C,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC;IACjC,CAAC;CAAA;AA7BD,8BA6BC;;;;;;;;;;;;ACtCD,sDAAsD;AACtD,kCAAkC;;;AAIlC,wGAAuH;AAEvH;;;GAGG;AACH,SAAgB,eAAe,CAAC,WAAmB;IAC/C,iDAAiD;IACjD,IAAI,WAAW,GAA0B,MAAM,CAAC;IAChD,IAAI,WAAW,IAAI,WAAW,CAAC,QAAQ,EAAE;QACrC,MAAM,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC;QAC1D,IAAI,QAAQ,KAAK,KAAK,EAAE;YACpB,WAAW,GAAG,KAAK,CAAC;SACvB;aAAM,IAAI,QAAQ,KAAK,QAAQ,EAAE;YAC9B,WAAW,GAAG,QAAQ,CAAC;SAC1B;aAAM,IAAI,QAAQ,KAAK,MAAM,EAAE;YAC5B,WAAW,GAAG,cAAc,CAAC;SAChC;KACJ;IAED,MAAM,SAAS,GAAkB;QAC7B,IAAI,EAAE,WAAW,IAAI,+BAAW,EAAC,WAAW,CAAC,IAAI,EAAE,aAAa,CAAC;QACjE,KAAK,EAAE,WAAW,IAAI,+BAAW,EAAC,WAAW,CAAC,KAAK,EAAE,cAAc,CAAC;QACpE,MAAM,EAAE,oCAAgB,EAAC,WAAW,IAAI,WAAW,CAAC,MAAM,EAAE,eAAe,CAAC;QAC5E,IAAI,EAAE,oCAAgB,EAAC,WAAW,IAAI,WAAW,CAAC,IAAI,EAAE,aAAa,CAAC;QACtE,OAAO,EAAE,uCAAmB,EAAC,WAAW,IAAI,WAAW,CAAC,OAAO,EAAE,gBAAgB,CAAC;QAClF,MAAM,EAAE,kCAAc,EAAC,WAAW,IAAI,WAAW,CAAC,MAAM,EAAE,eAAe,CAAC;QAC1E,QAAQ,EAAE,kCAAc,EAAC,WAAW,IAAI,WAAW,CAAC,QAAQ,EAAE,iBAAiB,CAAC;QAChF,QAAQ,EAAE,WAAW;QACrB,MAAM,EAAE,oCAAgB,EAAC,WAAW,IAAI,WAAW,CAAC,MAAM,EAAE,eAAe,CAAC;KAC/E,CAAC;IAEF,OAAO,SAAS,CAAC;AACrB,CAAC;AA3BD,0CA2BC;;;;;;;;;;;;ACtCD,sDAAsD;AACtD,kCAAkC;;;AAGlC,yEAA8C;AAC9C,wFAA6C;AAE7C;;;;;GAKG;AACH,SAAgB,cAAc,CAAC,QAA6B,EAAE,YAAoB;IAC9E,IAAI,OAAO,QAAQ,KAAK,SAAS,EAAE;QAC/B,OAAwB;YACpB,KAAK,EAAE,QAAQ;SAClB,CAAC;KACL;IAED,IAAI,uBAAS,EAAC,QAAQ,CAAC,EAAE;QACrB,MAAM,IAAI,0BAAiB,CACvB,+CAA+C,OAAO,QAAQ,kCAAkC,YAAY,IAAI,CACnH,CAAC;KACL;IAED,OAAO,SAAS,CAAC;AACrB,CAAC;AAdD,wCAcC;AAED;;;;;GAKG;AACH,SAAgB,gBAAgB,CAC5B,QAAqC,EACrC,YAAoB;IAEpB,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;QAC9B,OAA0B;YACtB,KAAK,EAAE,QAAQ;SAClB,CAAC;KACL;SAAM,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;QACrC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE;YAC1B,MAAM,YAAY,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;YAC1C,OAA0B;gBACtB,KAAK,EAAE,YAAY;aACtB,CAAC;SACL;KACJ;IAED,IAAI,uBAAS,EAAC,QAAQ,CAAC,EAAE;QACrB,MAAM,IAAI,0BAAiB,CACvB,8CAA8C,OAAO,QAAQ,kCAAkC,YAAY,IAAI,CAClH,CAAC;KACL;IAED,OAAO,SAAS,CAAC;AACrB,CAAC;AAxBD,4CAwBC;AAED;;;;;GAKG;AACH,SAAgB,WAAW,CAAC,QAA4B,EAAE,YAAoB;IAC1E,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;QAC9B,OAAO,QAAQ,CAAC;KACnB;IAED,IAAI,uBAAS,EAAC,QAAQ,CAAC,EAAE;QACrB,MAAM,IAAI,0BAAiB,CACvB,8CAA8C,OAAO,QAAQ,kCAAkC,YAAY,IAAI,CAClH,CAAC;KACL;IAED,OAAO,EAAE,CAAC;AACd,CAAC;AAZD,kCAYC;AAED;;;;;GAKG;AACH,SAAgB,gBAAgB,CAAC,QAA4B,EAAE,YAAoB;IAC/E,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;QAC9B,OAA0B;YACtB,KAAK,EAAE,QAAQ;SAClB,CAAC;KACL;IAED,IAAI,uBAAS,EAAC,QAAQ,CAAC,EAAE;QACrB,MAAM,IAAI,0BAAiB,CACvB,8CAA8C,OAAO,QAAQ,kCAAkC,YAAY,IAAI,CAClH,CAAC;KACL;IAED,OAAO,SAAS,CAAC;AACrB,CAAC;AAdD,4CAcC;AAED;;;;;GAKG;AACH,SAAgB,mBAAmB,CAC/B,QAAmC,EACnC,YAAoB;IAEpB,IAAI,uBAAS,EAAC,QAAQ,CAAC,EAAE;QACrB,IAAI;YACA,MAAM,kBAAkB,GAAG,OAAO,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YAExF,IAAI,kBAAkB,IAAI,kBAAkB,IAAI,CAAC,EAAE;gBAC/C,OAAO;oBACH,KAAK,EAAE;wBACH,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,kBAAkB,GAAG,IAAI,CAAC;qBACjD;iBACJ,CAAC;aACL;SACJ;QAAC,WAAM;YACJ,MAAM,IAAI,0BAAiB,CACvB,yDAAyD,OAAO,QAAQ,6BAA6B,YAAY,IAAI,CACxH,CAAC;SACL;KACJ;IACD,OAAO,SAAS,CAAC;AACrB,CAAC;AAtBD,kDAsBC;;;;;;;;;;;;ACnID,sDAAsD;AACtD,kCAAkC;;;AAIlC,SAAgB,cAAc,CAAC,IAAa;IACxC,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,SAAS,EAAE;QACrC,OAAO,IAAI,CAAC;KACf;SAAM,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;QACjC,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;KAC3B;SAAM,IAAI,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;QAC9B,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;KAC1B;SAAM,IAAI,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;QACjC,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAC5E,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;KAC3B;SAAM,IAAI,IAAI,YAAY,WAAW,EAAE;QACpC,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC;QACnC,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;KAC3B;SAAM,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;QACjC,IAAI,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YACxB,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC;SACxB;aAAM;YACH,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;SAC3B;KACJ;SAAM;QACH,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC;KACzC;AACL,CAAC;AAtBD,wCAsBC;;;;;;;;;;;;AC3BD,sDAAsD;AACtD,kCAAkC;;;AAUlC,MAAa,iBAAkB,SAAQ,KAAK;IAA5C;;QACI,gCAA2B,GAAG,IAAI,CAAC;IACvC,CAAC;CAAA;AAFD,8CAEC;AAED,MAAa,eAAgB,SAAQ,SAAS;IAA9C;;QACI,gCAA2B,GAAG,IAAI,CAAC;IACvC,CAAC;CAAA;AAFD,0CAEC;AAED,MAAa,gBAAiB,SAAQ,UAAU;IAAhD;;QACI,gCAA2B,GAAG,IAAI,CAAC;IACvC,CAAC;CAAA;AAFD,4CAEC;AAED,MAAa,aAAc,SAAQ,eAAe;IAC9C,YAAY,YAAoB;QAC5B,KAAK,CAAC,wCAAwC,YAAY,GAAG,CAAC,CAAC;IACnE,CAAC;CACJ;AAJD,sCAIC;AAED,SAAgB,eAAe,CAAC,GAAY;IACxC,IAAI,GAAG,YAAY,KAAK,EAAE;QACtB,OAAO,GAAG,CAAC;KACd;SAAM;QACH,IAAI,OAAe,CAAC;QACpB,IAAI,GAAG,KAAK,SAAS,IAAI,GAAG,KAAK,IAAI,EAAE;YACnC,OAAO,GAAG,eAAe,CAAC;SAC7B;aAAM,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;YAChC,OAAO,GAAG,GAAG,CAAC;SACjB;aAAM,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;YAChC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;SACjC;aAAM;YACH,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;SACzB;QACD,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;KAC7B;AACL,CAAC;AAhBD,0CAgBC;AAED;;;GAGG;AACH,SAAgB,OAAO,CAAC,GAAY;IAChC,OAAO,GAAG,KAAK,IAAI,IAAI,GAAG,KAAK,SAAS,CAAC;AAC7C,CAAC;AAFD,0BAEC;;;;;;;;;;;;ACrDD,sDAAsD;AACtD,kCAAkC;;;AAGlC,6FAA4C;AAE5C,MAAa,eAAgB,SAAQ,yBAAW;CAAoC;AAApF,0CAAoF;;;;;;;;;;;;ACNpF,sDAAsD;AACtD,kCAAkC;;;AAGlC,6FAA4C;AAE5C,MAAa,mBAAoB,SAAQ,yBAAW;CAAwC;AAA5F,kDAA4F;;;;;;;;;;;;ACN5F,sDAAsD;AACtD,kCAAkC;;;;;;;;;;;;;;;AAGlC,yEAA0C;AAC1C,wFAA+C;AAE/C,MAAa,WAAW;IAGpB,YAAY,IAA4B;;;QAFxC,oCAA6B;QAGzB,2BAAI,qBAAS,IAAI,aAAJ,IAAI,cAAJ,IAAI,GAAI,EAAE,OAAC;QACxB,uCAAI,yBAAM,EAAC,QAAQ,uCAAR,QAAQ,GAAK,EAAE,EAAC;IAC/B,CAAC;IAED,IAAI,QAAQ;QACR,OAAO,yBAAW,EAAC,2BAAI,yBAAM,EAAE,UAAU,CAAC,CAAC;IAC/C,CAAC;IAED,IAAI,QAAQ,CAAC,MAAe;QACxB,MAAM,IAAI,sBAAa,CAAC,UAAU,CAAC,CAAC;IACxC,CAAC;CACJ;AAfD,kCAeC;;;;;;;;;;;;;ACtBD,sDAAsD;AACtD,kCAAkC;;;;;;;;;;;;;;;AAGlC,yEAA0C;AAC1C,0GAAyD;AACzD,wFAA+C;AAC/C,6FAA4C;AAE5C,MAAa,qBAAsB,SAAQ,yBAAW;IAGlD,YAAY,IAAsC;;;QAC9C,KAAK,CAAC,IAAI,CAAC,CAAC;QAHhB,8CAAuC;QAInC,2BAAI,+BAAS,IAAI,aAAJ,IAAI,cAAJ,IAAI,GAAI,EAAE,OAAC;QACxB,uCAAI,mCAAM,EAAC,MAAM,uCAAN,MAAM,GAAK,EAAE,EAAC;QACzB,uCAAI,mCAAM,EAAC,iBAAiB,uCAAjB,iBAAiB,GAAK,IAAI,qCAAiB,EAAE,EAAC;IAC7D,CAAC;IAED,IAAI,iBAAiB;QACjB,OAAO,yBAAW,EAAC,2BAAI,mCAAM,EAAE,mBAAmB,CAAC,CAAC;IACxD,CAAC;IAED,IAAI,iBAAiB,CAAC,MAA+B;QACjD,MAAM,IAAI,sBAAa,CAAC,mBAAmB,CAAC,CAAC;IACjD,CAAC;IAED,IAAI,MAAM;QACN,OAAO,yBAAW,EAAC,2BAAI,mCAAM,EAAE,QAAQ,CAAC,CAAC;IAC7C,CAAC;IAED,IAAI,MAAM,CAAC,KAAgB;QACvB,2BAAI,mCAAM,CAAC,MAAM,GAAG,KAAK,CAAC;IAC9B,CAAC;CACJ;AAzBD,sDAyBC;;;;;;;;;;;;;AClCD,sDAAsD;AACtD,kCAAkC;;;;;;;;;;;;;;;AAGlC,2HAAgE;AAEhE,MAAa,qBAAsB,SAAQ,6CAAqB;IAG5D,YAAY,IAAsC;QAC9C,KAAK,CAAC,IAAI,CAAC,CAAC;QAHhB,8CAAuC;QAInC,2BAAI,+BAAS,IAAI,aAAJ,IAAI,cAAJ,IAAI,GAAI,EAAE,OAAC;IAC5B,CAAC;IAED,IAAI,MAAM;QACN,OAAO,2BAAI,mCAAM,CAAC,MAAM,CAAC;IAC7B,CAAC;IAED,IAAI,MAAM,CAAC,KAAc;QACrB,2BAAI,mCAAM,CAAC,MAAM,GAAG,KAAK,CAAC;IAC9B,CAAC;IAED,IAAI,KAAK;QACL,OAAO,2BAAI,mCAAM,CAAC,KAAK,CAAC;IAC5B,CAAC;IAED,IAAI,KAAK,CAAC,KAAc;QACpB,2BAAI,mCAAM,CAAC,KAAK,GAAG,KAAK,CAAC;IAC7B,CAAC;CACJ;AAvBD,sDAuBC;;;;;;;;;;;;;AC7BD,sDAAsD;AACtD,kCAAkC;;;;;;;;;;;;;;;AAGlC,wFAA+C;AAC/C,2HAAgE;AAEhE,MAAa,oBAAqB,SAAQ,6CAAqB;IAG3D,YAAY,IAAqC;;;QAC7C,KAAK,CAAC,IAAI,CAAC,CAAC;QAHhB,6CAAsC;QAIlC,2BAAI,8BAAS,IAAI,aAAJ,IAAI,cAAJ,IAAI,GAAI,EAAE,OAAC;QACxB,uCAAI,kCAAM,EAAC,gBAAgB,uCAAhB,gBAAgB,GAAK,GAAG,EAAE,GAAE,CAAC,EAAC;IAC7C,CAAC;IAED,IAAI,eAAe;QACf,OAAO,yBAAW,EAAC,2BAAI,kCAAM,EAAE,kBAAkB,CAAC,CAAC;IACvD,CAAC;IAED,IAAI,eAAe,CAAC,KAA4B;QAC5C,2BAAI,kCAAM,CAAC,gBAAgB,GAAG,KAAK,CAAC;IACxC,CAAC;CACJ;AAhBD,oDAgBC;;;;;;;;;;;;;ACvBD,sDAAsD;AACtD,kCAAkC;;;AAIlC,iGAAiD;AACjD,sHAA+D;AAC/D,yGAAoD;AACpD,qHAA4D;AAC5D,2HAAgE;AAChE,wHAA8D;AAE9D,SAAS,YAAY,CAAC,QAAgB,EAAE,QAAgC;IACpE,MAAM,OAAO,GAAG,yCAAiB,GAAE,CAAC;IACpC,IAAI,CAAC,OAAO,EAAE;QACV,OAAO,CAAC,IAAI,CACR,sCAAsC,QAAQ,+DAA+D,CAChH,CAAC;QACF,OAAO,IAAI,uBAAU,CAAC,GAAG,EAAE;YACvB,OAAO,CAAC,IAAI,CACR,qCAAqC,QAAQ,+DAA+D,CAC/G,CAAC;QACN,CAAC,CAAC,CAAC;KACN;SAAM;QACH,OAAO,OAAO,CAAC,YAAY,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;KACnD;AACL,CAAC;AAED,SAAgB,QAAQ,CAAC,OAAwB;IAC7C,OAAO,YAAY,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,EAAE;QAC5C,OAAO,OAAO,CAAC,IAAI,iCAAe,CAAC,WAAW,CAAC,CAAC,CAAC;IACrD,CAAC,CAAC,CAAC;AACP,CAAC;AAJD,4BAIC;AAED,SAAgB,YAAY,CAAC,OAA4B;IACrD,OAAO,YAAY,CAAC,cAAc,EAAE,CAAC,WAAW,EAAE,EAAE;QAChD,OAAO,OAAO,CAAC,IAAI,yCAAmB,CAAC,WAAW,CAAC,CAAC,CAAC;IACzD,CAAC,CAAC,CAAC;AACP,CAAC;AAJD,oCAIC;AAED,SAAgB,aAAa,CAAC,OAA6B;IACvD,OAAO,YAAY,CAAC,eAAe,EAAE,CAAC,WAAW,EAAE,EAAE;QACjD,OAAO,OAAO,CAAC,IAAI,2CAAoB,CAAC,WAAW,CAAC,CAAC,CAAC;IAC1D,CAAC,CAAC,CAAC;AACP,CAAC;AAJD,sCAIC;AAED,SAAgB,cAAc,CAAC,OAA8B;IACzD,OAAO,YAAY,CAAC,gBAAgB,EAAE,CAAC,WAAW,EAAE,EAAE;QAClD,OAAO,OAAO,CAAC,IAAI,6CAAqB,CAAC,WAAW,CAAC,CAAC,CAAC;IAC3D,CAAC,CAAC,CAAC;AACP,CAAC;AAJD,wCAIC;;;;;;;;;;;;AClDD,sDAAsD;AACtD,kCAAkC;;;;;;;;;;;;;;;;;;;;;;;;AAOlC,6DAAgE;AAChE,oDAAsC;AACtC,0HAAoE;AACpE,wFAA+C;AAC/C,yIAA0E;AAM1E,MAAa,WAAW;IAQpB,YAAY,IAA6B;;QAJzC,0CAAqC;QACrC,oCAAgB;QAChB,oCAA+B;QAG3B,2BAAI,qBAAS,IAAI,OAAC;QAElB,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,2BAAI,qBAAS,IAAI,CAAC,aAAa,OAAC;SACnC;aAAM;YACH,MAAM,GAAG,GAAG,yBAAW,EAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAErC,IAAI,IAAiC,CAAC;YACtC,IAAI,UAAI,CAAC,IAAI,0CAAE,KAAK,EAAE;gBAClB,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,UAAI,CAAC,IAAI,0CAAE,KAAK,CAAC,CAAC;aACxC;iBAAM,IAAI,UAAI,CAAC,IAAI,0CAAE,MAAM,EAAE;gBAC1B,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;aAC3B;YAED,2BAAI,qBAAS,IAAI,gBAAQ,CAAC,GAAG,EAAE;gBAC3B,IAAI;gBACJ,MAAM,EAAE,yBAAW,EAAC,IAAI,EAAE,QAAQ,CAAC;gBACnC,OAAO,EAAE,yCAAmB,EAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,OAAO,CAAC;aACnE,CAAC,OAAC;SACN;QAED,IAAI,CAAC,KAAK,GAAG,IAAI,qBAAe,CAAC,yCAAmB,EAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QACtF,IAAI,CAAC,MAAM,GAAG,yCAAmB,EAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IACxE,CAAC;IAED,IAAI,GAAG;QACH,OAAO,2BAAI,yBAAM,CAAC,GAAG,CAAC;IAC1B,CAAC;IAED,IAAI,MAAM;QACN,OAAO,2BAAI,yBAAM,CAAC,MAAM,CAAC;IAC7B,CAAC;IAED,IAAI,OAAO;QACP,OAAO,2BAAI,yBAAM,CAAC,OAAO,CAAC;IAC9B,CAAC;IAED,IAAI,IAAI;QACJ,IAAI,2BAAI,+BAAY,KAAK,SAAS,EAAE;YAChC,2BAAI,2BAAe,2DAA0B,EAAC,IAAI,CAAC,OAAO,CAAC,OAAC;SAC/D;QAED,OAAO,2BAAI,+BAAY,CAAC;IAC5B,CAAC;IAED,IAAI,IAAI;QACJ,OAAO,2BAAI,yBAAM,CAAC,IAAI,CAAC;IAC3B,CAAC;IAED,IAAI,QAAQ;QACR,OAAO,2BAAI,yBAAM,CAAC,QAAQ,CAAC;IAC/B,CAAC;IAEK,WAAW;;YACb,OAAO,2BAAI,yBAAM,CAAC,WAAW,EAAE,CAAC;QACpC,CAAC;KAAA;IAEK,IAAI;;YACN,OAAO,2BAAI,yBAAM,CAAC,IAAI,EAAE,CAAC;QAC7B,CAAC;KAAA;IAEK,QAAQ;;YACV,OAAO,2BAAI,yBAAM,CAAC,QAAQ,EAAE,CAAC;QACjC,CAAC;KAAA;IAEK,IAAI;;YACN,OAAO,2BAAI,yBAAM,CAAC,IAAI,EAAE,CAAC;QAC7B,CAAC;KAAA;IAEK,IAAI;;YACN,OAAO,2BAAI,yBAAM,CAAC,IAAI,EAAE,CAAC;QAC7B,CAAC;KAAA;IAED,KAAK;QACD,MAAM,OAAO,GAAG,eAAe,CAAC,2BAAI,yBAAM,CAAC,CAAC;QAC5C,OAAO,CAAC,aAAa,GAAG,2BAAI,yBAAM,CAAC,KAAK,EAAE,CAAC;QAC3C,OAAO,IAAI,WAAW,CAAC,OAAO,CAAC,CAAC;IACpC,CAAC;CACJ;AAvFD,kCAuFC;;;;;;;;;;;;;ACzGD,sDAAsD;AACtD,kCAAkC;;;;;;;;;;;;;;;;;;;;;;;;AAMlC,6DAAiG;AACjG,wFAA6C;AAM7C,MAAa,YAAY;IAOrB,YAAY,IAA+B;;QAH3C,qCAAiB;QACjB,qCAAgC;QAG5B,IAAI,aAAJ,IAAI,cAAJ,IAAI,IAAJ,IAAI,GAAK,EAAE,EAAC;QACZ,2BAAI,sBAAS,IAAI,OAAC;QAElB,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,2BAAI,sBAAS,IAAI,CAAC,cAAc,OAAC;SACpC;aAAM;YACH,MAAM,QAAQ,GAAkB,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC;YAC/E,IAAI,uBAAS,EAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;gBAC1B,2BAAI,sBAAS,iBAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,OAAC;aACxD;iBAAM;gBACH,2BAAI,sBAAS,IAAI,iBAAS,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,OAAC;aACnD;SACJ;QAED,IAAI,CAAC,OAAO,GAAG,UAAI,CAAC,OAAO,mCAAI,EAAE,CAAC;QAClC,IAAI,CAAC,wBAAwB,GAAG,CAAC,CAAC,IAAI,CAAC,wBAAwB,CAAC;IACpE,CAAC;IAED,IAAI,MAAM;QACN,OAAO,2BAAI,0BAAM,CAAC,MAAM,CAAC;IAC7B,CAAC;IAED,IAAI,OAAO;QACP,OAAO,2BAAI,0BAAM,CAAC,OAAO,CAAC;IAC9B,CAAC;IAED,IAAI,IAAI;QACJ,OAAO,2BAAI,0BAAM,CAAC,IAAI,CAAC;IAC3B,CAAC;IAED,IAAI,QAAQ;QACR,OAAO,2BAAI,0BAAM,CAAC,QAAQ,CAAC;IAC/B,CAAC;IAEK,WAAW;;YACb,OAAO,2BAAI,0BAAM,CAAC,WAAW,EAAE,CAAC;QACpC,CAAC;KAAA;IAEK,IAAI;;YACN,OAAO,2BAAI,0BAAM,CAAC,IAAI,EAAE,CAAC;QAC7B,CAAC;KAAA;IAEK,QAAQ;;YACV,OAAO,2BAAI,0BAAM,CAAC,QAAQ,EAAE,CAAC;QACjC,CAAC;KAAA;IAEK,IAAI;;YACN,OAAO,2BAAI,0BAAM,CAAC,IAAI,EAAE,CAAC;QAC7B,CAAC;KAAA;IAEK,IAAI;;YACN,OAAO,2BAAI,0BAAM,CAAC,IAAI,EAAE,CAAC;QAC7B,CAAC;KAAA;IAED,KAAK;QACD,MAAM,OAAO,GAAG,eAAe,CAAC,2BAAI,0BAAM,CAAC,CAAC;QAC5C,OAAO,CAAC,cAAc,GAAG,2BAAI,0BAAM,CAAC,KAAK,EAAE,CAAC;QAC5C,OAAO,IAAI,YAAY,CAAC,OAAO,CAAC,CAAC;IACrC,CAAC;CACJ;AAnED,oCAmEC;;;;;;;;;;;;;ACjFD,sDAAsD;AACtD,kCAAkC;;;AAIlC,wFAAgD;AAEhD,gDAAgD;AAChD,+IAA+I;AAE/I,SAAgB,0BAA0B,CAAC,OAAgB;IACvD,IAAI,IAAI,GAA2B,IAAI,CAAC;IAExC,MAAM,eAAe,GAAG,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;IAC7D,IAAI,eAAe,EAAE;QACjB,MAAM,mBAAmB,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;QAEjG,IAAI,mBAAmB,CAAC,kBAAkB,CAAC,EAAE;YACzC,IAAI,GAAG;gBACH,IAAI,EAAE,eAAe;gBACrB,EAAE,EAAE,mBAAmB,CAAC,QAAQ,CAAC;gBACjC,QAAQ,EAAE,mBAAmB,CAAC,aAAa,CAAC;gBAC5C,gBAAgB,EAAE,mBAAmB,CAAC,kBAAkB,CAAC;gBACzD,mBAAmB;aACtB,CAAC;SACL;aAAM;YACH,IAAI,GAAG;gBACH,IAAI,EAAE,YAAY;gBAClB,EAAE,EAAE,0BAAY,EAAC,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,EAAE,SAAS,CAAC;gBACpE,QAAQ,EAAE,0BAAY,EAAC,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,EAAE,WAAW,CAAC;gBAC9E,gBAAgB,EAAE,0BAAY,EAAC,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,EAAE,UAAU,CAAC;gBACpF,mBAAmB;aACtB,CAAC;SACL;KACJ;IAED,OAAO,IAAI,CAAC;AAChB,CAAC;AA3BD,gEA2BC;;;;;;;;;;;;ACrCD,sDAAsD;AACtD,kCAAkC;;;AAclC,gGAAkD;AAElD,SAAgB,WAAW,CAAC,OAAgC;IACxD,OAAO,mBAAmB,iCACnB,OAAO,KACV,IAAI,EAAE,MAAM,IACd,CAAC;AACP,CAAC;AALD,kCAKC;AAED,SAAgB,KAAK,CAAC,OAA0B;IAC5C,OAAO,mBAAmB,iCACnB,OAAO,KACV,IAAI,EAAE,OAAO,IACf,CAAC;AACP,CAAC;AALD,sBAKC;AAED,SAAgB,QAAQ,CAAC,OAA6B;IAClD,OAAO,mBAAmB,iCACnB,OAAO,KACV,IAAI,EAAE,UAAU,IAClB,CAAC;AACP,CAAC;AALD,4BAKC;AAED,SAAgB,GAAG,CAAC,OAAwB;IACxC,OAAO,mBAAmB,iCACnB,OAAO,KACV,IAAI,EAAE,KAAK,IACb,CAAC;AACP,CAAC;AALD,kBAKC;AAED,SAAgB,OAAO,CAAC,OAA4B;IAChD,OAAO,mBAAmB,CAAC,OAAO,CAAC,CAAC;AACxC,CAAC;AAFD,0BAEC;AAED,SAAS,mBAAmB,CAA4C,OAAU;IAC9E,OAAO,mCAAc,EAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AAC5C,CAAC;;;;;;;;;;;;ACnDD,sDAAsD;AACtD,kCAAkC;;;AA0BlC,gGAAkD;AAElD,SAAgB,IAAI,CAAC,OAA0B;IAC3C,OAAO,oBAAoB,iCACpB,OAAO,KACV,IAAI,EAAE,MAAM,IACd,CAAC;AACP,CAAC;AALD,oBAKC;AAED,SAAgB,WAAW,CAAC,OAAiC;IACzD,OAAO,oBAAoB,iCACpB,OAAO,KACV,IAAI,EAAE,MAAM,IACd,CAAC;AACP,CAAC;AALD,kCAKC;AAED,SAAgB,KAAK,CAAC,OAA2B;IAC7C,OAAO,oBAAoB,iCACpB,OAAO,KACV,IAAI,EAAE,OAAO,IACf,CAAC;AACP,CAAC;AALD,sBAKC;AAED,SAAgB,YAAY,CAAC,OAAkC;IAC3D,OAAO,oBAAoB,iCACpB,OAAO,KACV,IAAI,EAAE,OAAO,IACf,CAAC;AACP,CAAC;AALD,oCAKC;AAED,SAAgB,eAAe,CAAC,OAAqC;IACjE,OAAO,oBAAoB,iCACpB,OAAO,KACV,IAAI,EAAE,YAAY,IACpB,CAAC;AACP,CAAC;AALD,0CAKC;AAED,SAAgB,eAAe,CAAC,OAAqC;IACjE,OAAO,oBAAoB,iCACpB,OAAO,KACV,IAAI,EAAE,YAAY,IACpB,CAAC;AACP,CAAC;AALD,0CAKC;AAED,SAAgB,QAAQ,CAAC,OAA8B;IACnD,OAAO,oBAAoB,iCACpB,OAAO,KACV,IAAI,EAAE,UAAU,IAClB,CAAC;AACP,CAAC;AALD,4BAKC;AAED,SAAgB,SAAS,CAAC,OAA+B;IACrD,OAAO,oBAAoB,iCACpB,OAAO,KACV,IAAI,EAAE,WAAW,IACnB,CAAC;AACP,CAAC;AALD,8BAKC;AAED,SAAgB,QAAQ,CAAC,OAA8B;IACnD,OAAO,oBAAoB,iCACpB,OAAO,KACV,IAAI,EAAE,UAAU,IAClB,CAAC;AACP,CAAC;AALD,4BAKC;AAED,SAAgB,GAAG,CAAC,OAAyB;IACzC,OAAO,oBAAoB,iCACpB,OAAO,KACV,IAAI,EAAE,KAAK,IACb,CAAC;AACP,CAAC;AALD,kBAKC;AAED,SAAgB,OAAO,CAAC,OAA6B;IACjD,OAAO,oBAAoB,CAAC,OAAO,CAAC,CAAC;AACzC,CAAC;AAFD,0BAEC;AAED,SAAS,oBAAoB,CAA4C,OAAU;IAC/E,OAAO,mCAAc,EAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;AAC7C,CAAC;;;;;;;;;;;;ACzGD,sDAAsD;AACtD,kCAAkC;;;AA0BlC,gGAAkD;AAElD,SAAgB,IAAI,CAAC,OAA2B;IAC5C,OAAO,qBAAqB,iCACrB,OAAO,KACV,SAAS,EAAE,OAAO,CAAC,SAAS,IAAI,WAAW,EAC3C,OAAO,EAAE,OAAO,CAAC,OAAO,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,EAC3C,IAAI,EAAE,aAAa,IACrB,CAAC;AACP,CAAC;AAPD,oBAOC;AAED,SAAgB,KAAK,CAAC,OAA4B;IAC9C,OAAO,qBAAqB,iCACrB,OAAO,KACV,IAAI,EAAE,cAAc,IACtB,CAAC;AACP,CAAC;AALD,sBAKC;AAED,SAAgB,WAAW,CAAC,OAAkC;IAC1D,OAAO,qBAAqB,iCACrB,OAAO,KACV,IAAI,EAAE,aAAa,IACrB,CAAC;AACP,CAAC;AALD,kCAKC;AAED,SAAgB,YAAY,CAAC,OAAmC;IAC5D,OAAO,qBAAqB,iCACrB,OAAO,KACV,IAAI,EAAE,cAAc,IACtB,CAAC;AACP,CAAC;AALD,oCAKC;AAED,SAAgB,eAAe,CAAC,OAAsC;IAClE,OAAO,qBAAqB,iCACrB,OAAO,KACV,IAAI,EAAE,mBAAmB,IAC3B,CAAC;AACP,CAAC;AALD,0CAKC;AAED,SAAgB,eAAe,CAAC,OAAsC;IAClE,OAAO,qBAAqB,iCACrB,OAAO,KACV,IAAI,EAAE,mBAAmB,IAC3B,CAAC;AACP,CAAC;AALD,0CAKC;AAED,SAAgB,QAAQ,CAAC,OAA+B;IACpD,OAAO,qBAAqB,iCACrB,OAAO,KACV,IAAI,EAAE,iBAAiB,IACzB,CAAC;AACP,CAAC;AALD,4BAKC;AAED,SAAgB,SAAS,CAAC,OAAgC;IACtD,OAAO,qBAAqB,iCACrB,OAAO,KACV,IAAI,EAAE,kBAAkB,IAC1B,CAAC;AACP,CAAC;AALD,8BAKC;AAED,SAAgB,QAAQ,CAAC,OAA+B;IACpD,OAAO,qBAAqB,iCACrB,OAAO,KACV,IAAI,EAAE,iBAAiB,IACzB,CAAC;AACP,CAAC;AALD,4BAKC;AAED,SAAgB,MAAM,CAAC,OAA6B;IAChD,OAAO,qBAAqB,iCACrB,OAAO,KACV,IAAI,EAAE,eAAe,IACvB,CAAC;AACP,CAAC;AALD,wBAKC;AAED,SAAgB,OAAO,CAAC,OAA8B;IAClD,OAAO,qBAAqB,CAAC,OAAO,CAAC,CAAC;AAC1C,CAAC;AAFD,0BAEC;AAED,SAAS,qBAAqB,CAA4C,OAAU;IAChF,OAAO,mCAAc,EAAC,OAAO,EAAE,SAAS,CAAC,CAAC;AAC9C,CAAC;;;;;;;;;;;;AC3GD,sDAAsD;AACtD,kCAAkC;;;;;;;;;;;;;;;AAElC;;;GAGG;AACH,MAAa,UAAU;IAiBnB,YAAY,aAAwB;QAFpC,4CAA2B;QAGvB,2BAAI,6BAAkB,aAAa,OAAC;IACxC,CAAC;IAlBD,MAAM,CAAC,IAAI,CAAC,GAAG,aAAmC;QAC9C,IAAI,WAAW,GAAkD,aAAa,CAAC;QAC/E,OAAO,IAAI,UAAU,CAAC;YAClB,IAAI,WAAW,EAAE;gBACb,KAAK,MAAM,UAAU,IAAI,WAAW,EAAE;oBAClC,IAAI,UAAU,IAAI,OAAO,UAAU,CAAC,OAAO,KAAK,UAAU,EAAE;wBACxD,UAAU,CAAC,OAAO,EAAE,CAAC;qBACxB;iBACJ;gBACD,WAAW,GAAG,SAAS,CAAC;aAC3B;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAQD,OAAO;QACH,IAAI,OAAO,2BAAI,iCAAe,KAAK,UAAU,EAAE;YAC3C,2BAAI,iCAAe,MAAnB,IAAI,CAAiB,CAAC;YACtB,2BAAI,6BAAkB,SAAS,OAAC;SACnC;IACL,CAAC;CACJ;AA3BD,gCA2BC;;;;;;;;;;;;;AClCD,sDAAsD;AACtD,kCAAkC;;;AAElC,SAAgB,SAAS,CAAC,QAAmC;IACzD,OAAO,CAAC,CAAC,QAAQ,IAAI,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACpD,CAAC;AAFD,8BAEC;AAED,SAAgB,aAAa,CAAC,QAAmC;IAC7D,OAAO,SAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,WAAW,EAAE,MAAK,aAAa,CAAC;AACrD,CAAC;AAFD,sCAEC;AAED,SAAgB,cAAc,CAAC,QAAmC;IAC9D,OAAO,SAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,WAAW,EAAE,MAAK,cAAc,CAAC;AACtD,CAAC;AAFD,wCAEC;;;;;;;;;;;;ACbD,sDAAsD;AACtD,kCAAkC;;;AAElC,yEAA8C;AAE9C;;;GAGG;AACH,SAAgB,WAAW,CACvB,MAAe,EACf,IAAU;IAEV,MAAM,KAAK,GAA2D,MAAM,CAAC,IAAI,CAAC,CAAC;IACnF,OAAO,YAAY,CAAC,KAAK,EAAU,IAAI,CAAC,CAAC;AAC7C,CAAC;AAND,kCAMC;AAED;;GAEG;AACH,SAAgB,YAAY,CAAI,KAA2B,EAAE,qBAA8B;IACvF,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,EAAE;QACvC,MAAM,IAAI,0BAAiB,CACvB,iEAAiE;YAC7D,CAAC,qBAAqB,CAAC,CAAC,CAAC,KAAK,qBAAqB,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAClE,CAAC;KACL;IAED,OAAO,KAAK,CAAC;AACjB,CAAC;AATD,oCASC;AAED,SAAgB,iBAAiB,CAAkC,MAAa,EAAE,WAAkB,EAAE,GAAS;IAC3G,IAAI,MAAM,CAAC,GAAG,CAAC,KAAK,IAAI,IAAI,MAAM,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE;QACnD,WAAW,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;KAClC;AACL,CAAC;AAJD,8CAIC;AAED,SAAgB,SAAS,CAAI,IAA0B;IACnD,OAAO,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,SAAS,CAAC;AAC/C,CAAC;AAFD,8BAEC;;;;;;;;;;;;ACvCD,sDAAsD;AACtD,kCAAkC;;;AAIlC,IAAI,OAA4C,CAAC;AACjD,SAAgB,iBAAiB;IAC7B,IAAI,OAAO,KAAK,SAAS,EAAE;QACvB,IAAI;YACA,8DAA8D;YAC9D,OAAO,GAAqB,mBAAO,CAAC,oDAAuB,CAAC,CAAC;SAChE;QAAC,WAAM;YACJ,OAAO,GAAG,IAAI,CAAC;SAClB;KACJ;IACD,OAAO,OAAO,CAAC;AACnB,CAAC;AAVD,8CAUC;;;;;;;;;;;AChBD;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;;;ACtBA,sDAAsD;AACtD,kCAAkC;;;AAElC,+DAA6B;AAC7B,6GAA0D;AAAjD,kIAAe;AACxB,yHAAkE;AAAzD,8IAAmB;AAC5B,iGAAkD;AAAzC,sHAAW;AACpB,+HAAsE;AAA7D,oJAAqB;AAC9B,+HAAsE;AAA7D,oJAAqB;AAC9B,4HAAoE;AAA3D,iJAAoB;AAC7B,+FAAiD;AAAxC,sHAAW;AACpB,kGAAmD;AAA1C,yHAAY;AACrB,qEAAiC;AACjC,uGAAwD;AAA/C,wIAAiB;AAC1B,wEAAmC;AACnC,2EAAqC;AACrC,8FAAgD;AAAvC,mHAAU","sources":["webpack://@azure/functions/./src/InvocationContext.ts","webpack://@azure/functions/./src/InvocationModel.ts","webpack://@azure/functions/./src/addBindingName.ts","webpack://@azure/functions/./src/app.ts","webpack://@azure/functions/./src/constants.ts","webpack://@azure/functions/./src/converters/fromRpcBindings.ts","webpack://@azure/functions/./src/converters/fromRpcContext.ts","webpack://@azure/functions/./src/converters/fromRpcNullable.ts","webpack://@azure/functions/./src/converters/fromRpcTriggerMetadata.ts","webpack://@azure/functions/./src/converters/fromRpcTypedData.ts","webpack://@azure/functions/./src/converters/toCamelCase.ts","webpack://@azure/functions/./src/converters/toRpcDuration.ts","webpack://@azure/functions/./src/converters/toRpcHttp.ts","webpack://@azure/functions/./src/converters/toRpcHttpCookie.ts","webpack://@azure/functions/./src/converters/toRpcNullable.ts","webpack://@azure/functions/./src/converters/toRpcTypedData.ts","webpack://@azure/functions/./src/errors.ts","webpack://@azure/functions/./src/hooks/AppStartContext.ts","webpack://@azure/functions/./src/hooks/AppTerminateContext.ts","webpack://@azure/functions/./src/hooks/HookContext.ts","webpack://@azure/functions/./src/hooks/InvocationHookContext.ts","webpack://@azure/functions/./src/hooks/PostInvocationContext.ts","webpack://@azure/functions/./src/hooks/PreInvocationContext.ts","webpack://@azure/functions/./src/hooks/registerHook.ts","webpack://@azure/functions/./src/http/HttpRequest.ts","webpack://@azure/functions/./src/http/HttpResponse.ts","webpack://@azure/functions/./src/http/extractHttpUserFromHeaders.ts","webpack://@azure/functions/./src/input.ts","webpack://@azure/functions/./src/output.ts","webpack://@azure/functions/./src/trigger.ts","webpack://@azure/functions/./src/utils/Disposable.ts","webpack://@azure/functions/./src/utils/isTrigger.ts","webpack://@azure/functions/./src/utils/nonNull.ts","webpack://@azure/functions/./src/utils/tryGetCoreApiLazy.ts","webpack://@azure/functions/external commonjs2 \"@azure/functions-core\"","webpack://@azure/functions/external commonjs2 \"undici\"","webpack://@azure/functions/external commonjs2 \"url\"","webpack://@azure/functions/external commonjs2 \"util\"","webpack://@azure/functions/webpack/bootstrap","webpack://@azure/functions/./src/index.ts"],"sourcesContent":["// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport * as types from '@azure/functions';\r\nimport {\r\n    EffectiveFunctionOptions,\r\n    InvocationContextInit,\r\n    LogHandler,\r\n    RetryContext,\r\n    TraceContext,\r\n    TriggerMetadata,\r\n} from '@azure/functions';\r\n\r\nexport class InvocationContext implements types.InvocationContext {\r\n    invocationId: string;\r\n    functionName: string;\r\n    extraInputs: InvocationContextExtraInputs;\r\n    extraOutputs: InvocationContextExtraOutputs;\r\n    retryContext?: RetryContext;\r\n    traceContext?: TraceContext;\r\n    triggerMetadata?: TriggerMetadata;\r\n    options: EffectiveFunctionOptions;\r\n    #userLogHandler: LogHandler;\r\n\r\n    constructor(init?: InvocationContextInit) {\r\n        init = init || {};\r\n        const fallbackString = 'unknown';\r\n        this.invocationId = init.invocationId || fallbackString;\r\n        this.functionName = init.functionName || fallbackString;\r\n        this.extraInputs = new InvocationContextExtraInputs();\r\n        this.extraOutputs = new InvocationContextExtraOutputs();\r\n        this.retryContext = init.retryContext;\r\n        this.traceContext = init.traceContext;\r\n        this.triggerMetadata = init.triggerMetadata;\r\n        this.options = {\r\n            trigger: init.options?.trigger || {\r\n                name: fallbackString,\r\n                type: fallbackString,\r\n            },\r\n            return: init.options?.return,\r\n            extraInputs: init.options?.extraInputs || [],\r\n            extraOutputs: init.options?.extraOutputs || [],\r\n        };\r\n        this.#userLogHandler = init.logHandler || fallbackLogHandler;\r\n    }\r\n\r\n    log(...args: unknown[]): void {\r\n        this.#userLogHandler('information', ...args);\r\n    }\r\n\r\n    trace(...args: unknown[]): void {\r\n        this.#userLogHandler('trace', ...args);\r\n    }\r\n\r\n    debug(...args: unknown[]): void {\r\n        this.#userLogHandler('debug', ...args);\r\n    }\r\n\r\n    info(...args: unknown[]): void {\r\n        this.#userLogHandler('information', ...args);\r\n    }\r\n\r\n    warn(...args: unknown[]): void {\r\n        this.#userLogHandler('warning', ...args);\r\n    }\r\n\r\n    error(...args: unknown[]): void {\r\n        this.#userLogHandler('error', ...args);\r\n    }\r\n}\r\n\r\nclass InvocationContextExtraInputs implements types.InvocationContextExtraInputs {\r\n    #inputs: Record<string, unknown> = {};\r\n    get(inputOrName: types.FunctionInput | string): any {\r\n        const name = typeof inputOrName === 'string' ? inputOrName : inputOrName.name;\r\n        return this.#inputs[name];\r\n    }\r\n    set(inputOrName: types.FunctionInput | string, value: unknown): void {\r\n        const name = typeof inputOrName === 'string' ? inputOrName : inputOrName.name;\r\n        this.#inputs[name] = value;\r\n    }\r\n}\r\n\r\nclass InvocationContextExtraOutputs implements types.InvocationContextExtraOutputs {\r\n    #outputs: Record<string, unknown> = {};\r\n    get(outputOrName: types.FunctionOutput | string): unknown {\r\n        const name = typeof outputOrName === 'string' ? outputOrName : outputOrName.name;\r\n        return this.#outputs[name];\r\n    }\r\n    set(outputOrName: types.FunctionOutput | string, value: unknown): void {\r\n        const name = typeof outputOrName === 'string' ? outputOrName : outputOrName.name;\r\n        this.#outputs[name] = value;\r\n    }\r\n}\r\n\r\nfunction fallbackLogHandler(level: types.LogLevel, ...args: unknown[]): void {\r\n    switch (level) {\r\n        case 'trace':\r\n            console.trace(...args);\r\n            break;\r\n        case 'debug':\r\n            console.debug(...args);\r\n            break;\r\n        case 'information':\r\n            console.info(...args);\r\n            break;\r\n        case 'warning':\r\n            console.warn(...args);\r\n            break;\r\n        case 'critical':\r\n        case 'error':\r\n            console.error(...args);\r\n            break;\r\n        default:\r\n            console.log(...args);\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport * as coreTypes from '@azure/functions-core';\r\nimport {\r\n    CoreInvocationContext,\r\n    InvocationArguments,\r\n    RpcBindingInfo,\r\n    RpcInvocationResponse,\r\n    RpcLogCategory,\r\n    RpcLogLevel,\r\n    RpcTypedData,\r\n} from '@azure/functions-core';\r\nimport { format } from 'util';\r\nimport { returnBindingKey } from './constants';\r\nimport { fromRpcBindings } from './converters/fromRpcBindings';\r\nimport { fromRpcRetryContext, fromRpcTraceContext } from './converters/fromRpcContext';\r\nimport { fromRpcTriggerMetadata } from './converters/fromRpcTriggerMetadata';\r\nimport { fromRpcTypedData } from './converters/fromRpcTypedData';\r\nimport { toCamelCaseValue } from './converters/toCamelCase';\r\nimport { toRpcHttp } from './converters/toRpcHttp';\r\nimport { toRpcTypedData } from './converters/toRpcTypedData';\r\nimport { AzFuncSystemError } from './errors';\r\nimport { InvocationContext } from './InvocationContext';\r\nimport { isHttpTrigger, isTimerTrigger, isTrigger } from './utils/isTrigger';\r\nimport { isDefined, nonNullProp, nonNullValue } from './utils/nonNull';\r\n\r\nexport class InvocationModel implements coreTypes.InvocationModel {\r\n    #isDone = false;\r\n    #coreCtx: CoreInvocationContext;\r\n    #functionName: string;\r\n    #bindings: Record<string, RpcBindingInfo>;\r\n    #triggerType: string;\r\n\r\n    constructor(coreCtx: CoreInvocationContext) {\r\n        this.#coreCtx = coreCtx;\r\n        this.#functionName = nonNullProp(coreCtx.metadata, 'name');\r\n        this.#bindings = nonNullProp(coreCtx.metadata, 'bindings');\r\n        const triggerBinding = nonNullValue(\r\n            Object.values(this.#bindings).find((b) => isTrigger(b.type)),\r\n            'triggerBinding'\r\n        );\r\n        this.#triggerType = nonNullProp(triggerBinding, 'type');\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/require-await\r\n    async getArguments(): Promise<InvocationArguments> {\r\n        const req = this.#coreCtx.request;\r\n\r\n        const context = new InvocationContext({\r\n            invocationId: nonNullProp(this.#coreCtx, 'invocationId'),\r\n            functionName: this.#functionName,\r\n            logHandler: (level: RpcLogLevel, ...args: unknown[]) => this.#userLog(level, ...args),\r\n            retryContext: fromRpcRetryContext(req.retryContext),\r\n            traceContext: fromRpcTraceContext(req.traceContext),\r\n            triggerMetadata: fromRpcTriggerMetadata(req.triggerMetadata, this.#triggerType),\r\n            options: fromRpcBindings(this.#bindings),\r\n        });\r\n\r\n        const inputs: unknown[] = [];\r\n        if (req.inputData) {\r\n            for (const binding of req.inputData) {\r\n                const bindingName = nonNullProp(binding, 'name');\r\n                let input: unknown = fromRpcTypedData(binding.data);\r\n\r\n                const rpcBinding = this.#bindings[bindingName];\r\n                if (!rpcBinding) {\r\n                    throw new AzFuncSystemError(\r\n                        `Failed to find binding \"${bindingName}\" in bindings \"${Object.keys(this.#bindings).join(\r\n                            ', '\r\n                        )}\".`\r\n                    );\r\n                }\r\n                const bindingType = rpcBinding.type;\r\n                if (isTimerTrigger(bindingType)) {\r\n                    input = toCamelCaseValue(input);\r\n                }\r\n\r\n                if (isTrigger(bindingType)) {\r\n                    inputs.push(input);\r\n                } else {\r\n                    context.extraInputs.set(bindingName, input);\r\n                }\r\n            }\r\n        }\r\n\r\n        return { context, inputs };\r\n    }\r\n\r\n    async invokeFunction(\r\n        context: InvocationContext,\r\n        inputs: unknown[],\r\n        handler: coreTypes.FunctionCallback\r\n    ): Promise<unknown> {\r\n        try {\r\n            return await Promise.resolve(handler(...inputs, context));\r\n        } finally {\r\n            this.#isDone = true;\r\n        }\r\n    }\r\n\r\n    async getResponse(context: InvocationContext, result: unknown): Promise<RpcInvocationResponse> {\r\n        const response: RpcInvocationResponse = { invocationId: this.#coreCtx.invocationId };\r\n\r\n        response.outputData = [];\r\n        let usedReturnValue = false;\r\n        for (const [name, binding] of Object.entries(this.#bindings)) {\r\n            if (binding.direction === 'out') {\r\n                if (name === returnBindingKey) {\r\n                    response.returnValue = await this.#convertOutput(binding, result);\r\n                    usedReturnValue = true;\r\n                } else {\r\n                    const outputValue = await this.#convertOutput(binding, context.extraOutputs.get(name));\r\n                    if (isDefined(outputValue)) {\r\n                        response.outputData.push({ name, data: outputValue });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // This allows the return value of non-HTTP triggered functions to be passed back\r\n        // to the host, even if no explicit output binding is set. In most cases, this is ignored,\r\n        // but e.g., Durable uses this to pass orchestrator state back to the Durable extension, w/o\r\n        // an explicit output binding. See here for more details: https://github.com/Azure/azure-functions-nodejs-library/pull/25\r\n        if (!usedReturnValue && !isHttpTrigger(this.#triggerType)) {\r\n            response.returnValue = toRpcTypedData(result);\r\n        }\r\n\r\n        return response;\r\n    }\r\n\r\n    async #convertOutput(binding: RpcBindingInfo, value: unknown): Promise<RpcTypedData | null | undefined> {\r\n        if (binding.type?.toLowerCase() === 'http') {\r\n            return toRpcHttp(value);\r\n        } else {\r\n            return toRpcTypedData(value);\r\n        }\r\n    }\r\n\r\n    #log(level: RpcLogLevel, logCategory: RpcLogCategory, ...args: unknown[]): void {\r\n        this.#coreCtx.log(level, logCategory, format(...args));\r\n    }\r\n\r\n    #systemLog(level: RpcLogLevel, ...args: unknown[]) {\r\n        this.#log(level, 'system', ...args);\r\n    }\r\n\r\n    #userLog(level: RpcLogLevel, ...args: unknown[]): void {\r\n        if (this.#isDone && this.#coreCtx.state !== 'postInvocationHooks') {\r\n            let badAsyncMsg =\r\n                \"Warning: Unexpected call to 'log' on the context object after function execution has completed. Please check for asynchronous calls that are not awaited. \";\r\n            badAsyncMsg += `Function name: ${this.#functionName}. Invocation Id: ${this.#coreCtx.invocationId}.`;\r\n            this.#systemLog('warning', badAsyncMsg);\r\n        }\r\n        this.#log(level, 'user', ...args);\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nexport { HttpRequest } from './http/HttpRequest';\r\nexport { HttpResponse } from './http/HttpResponse';\r\nexport { InvocationContext } from './InvocationContext';\r\n\r\nconst bindingCounts: Record<string, number> = {};\r\n/**\r\n * If the host spawns multiple workers, it expects the metadata (including binding name) to be the same across workers.\r\n * That means we need to generate binding names in a deterministic fashion, so we'll do that using a count\r\n * There's a tiny risk users register bindings in a non-deterministic order (i.e. async race conditions), but it's okay considering the following:\r\n * 1. We will track the count individually for each binding type. This makes the names more readable and reduces the chances a race condition will matter\r\n * 2. Users can manually specify the name themselves (aka if they're doing weird async stuff) and we will respect that\r\n * More info here: https://github.com/Azure/azure-functions-nodejs-worker/issues/638\r\n */\r\nexport function addBindingName<T extends { type: string; name?: string }>(\r\n    binding: T,\r\n    suffix: string\r\n): T & { name: string } {\r\n    if (!binding.name) {\r\n        let bindingType = binding.type;\r\n        if (!bindingType.toLowerCase().endsWith(suffix.toLowerCase())) {\r\n            bindingType += suffix;\r\n        }\r\n        let count = bindingCounts[bindingType] || 0;\r\n        count += 1;\r\n        bindingCounts[bindingType] = count;\r\n        binding.name = bindingType + count.toString();\r\n    }\r\n    return <T & { name: string }>binding;\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport {\r\n    CosmosDBFunctionOptions,\r\n    EventGridFunctionOptions,\r\n    EventHubFunctionOptions,\r\n    ExponentialBackoffRetryOptions,\r\n    FixedDelayRetryOptions,\r\n    FunctionOptions,\r\n    FunctionTrigger,\r\n    GenericFunctionOptions,\r\n    HttpFunctionOptions,\r\n    HttpHandler,\r\n    HttpMethod,\r\n    HttpMethodFunctionOptions,\r\n    ServiceBusQueueFunctionOptions,\r\n    ServiceBusTopicFunctionOptions,\r\n    StorageBlobFunctionOptions,\r\n    StorageQueueFunctionOptions,\r\n    TimerFunctionOptions,\r\n    WarmupFunctionOptions,\r\n} from '@azure/functions';\r\nimport * as coreTypes from '@azure/functions-core';\r\nimport { CoreInvocationContext, FunctionCallback } from '@azure/functions-core';\r\nimport { returnBindingKey, version } from './constants';\r\nimport { toRpcDuration } from './converters/toRpcDuration';\r\nimport { InvocationModel } from './InvocationModel';\r\nimport * as output from './output';\r\nimport * as trigger from './trigger';\r\nimport { isTrigger } from './utils/isTrigger';\r\nimport { tryGetCoreApiLazy } from './utils/tryGetCoreApiLazy';\r\n\r\nexport * as hook from './hooks/registerHook';\r\n\r\nclass ProgrammingModel implements coreTypes.ProgrammingModel {\r\n    name = '@azure/functions';\r\n    version = version;\r\n    getInvocationModel(coreCtx: CoreInvocationContext): InvocationModel {\r\n        return new InvocationModel(coreCtx);\r\n    }\r\n}\r\n\r\nlet hasSetup = false;\r\nfunction setup() {\r\n    const coreApi = tryGetCoreApiLazy();\r\n    if (!coreApi) {\r\n        console.warn(\r\n            'WARNING: Failed to detect the Azure Functions runtime. Switching \"@azure/functions\" package to test mode - not all features are supported.'\r\n        );\r\n    } else {\r\n        coreApi.setProgrammingModel(new ProgrammingModel());\r\n    }\r\n    hasSetup = true;\r\n}\r\n\r\nfunction convertToHttpOptions(\r\n    optionsOrHandler: HttpFunctionOptions | HttpHandler,\r\n    method: HttpMethod\r\n): HttpFunctionOptions {\r\n    const options: HttpFunctionOptions =\r\n        typeof optionsOrHandler === 'function' ? { handler: optionsOrHandler } : optionsOrHandler;\r\n    options.methods = [method];\r\n    return options;\r\n}\r\n\r\nfunction convertToGenericOptions<T extends Omit<FunctionOptions, 'trigger'> & Partial<FunctionOptions>>(\r\n    options: T,\r\n    triggerMethod: (o: Omit<T, 'handler' | 'return' | 'trigger' | 'extraInputs' | 'extraOutputs'>) => FunctionTrigger\r\n): FunctionOptions {\r\n    const { handler, return: ret, trigger, extraInputs, extraOutputs, ...triggerOptions } = options;\r\n    return {\r\n        trigger: trigger ?? triggerMethod(triggerOptions),\r\n        return: ret,\r\n        extraInputs,\r\n        extraOutputs,\r\n        handler,\r\n    };\r\n}\r\n\r\nexport function get(name: string, optionsOrHandler: HttpMethodFunctionOptions | HttpHandler): void {\r\n    http(name, convertToHttpOptions(optionsOrHandler, 'GET'));\r\n}\r\n\r\nexport function put(name: string, optionsOrHandler: HttpMethodFunctionOptions | HttpHandler): void {\r\n    http(name, convertToHttpOptions(optionsOrHandler, 'PUT'));\r\n}\r\n\r\nexport function post(name: string, optionsOrHandler: HttpMethodFunctionOptions | HttpHandler): void {\r\n    http(name, convertToHttpOptions(optionsOrHandler, 'POST'));\r\n}\r\n\r\nexport function patch(name: string, optionsOrHandler: HttpMethodFunctionOptions | HttpHandler): void {\r\n    http(name, convertToHttpOptions(optionsOrHandler, 'PATCH'));\r\n}\r\n\r\nexport function deleteRequest(name: string, optionsOrHandler: HttpMethodFunctionOptions | HttpHandler): void {\r\n    http(name, convertToHttpOptions(optionsOrHandler, 'DELETE'));\r\n}\r\n\r\nexport function http(name: string, options: HttpFunctionOptions): void {\r\n    options.return ||= output.http({});\r\n    generic(name, convertToGenericOptions(options, trigger.http));\r\n}\r\n\r\nexport function timer(name: string, options: TimerFunctionOptions): void {\r\n    generic(name, convertToGenericOptions(options, trigger.timer));\r\n}\r\n\r\nexport function storageBlob(name: string, options: StorageBlobFunctionOptions): void {\r\n    generic(name, convertToGenericOptions(options, trigger.storageBlob));\r\n}\r\n\r\nexport function storageQueue(name: string, options: StorageQueueFunctionOptions): void {\r\n    generic(name, convertToGenericOptions(options, trigger.storageQueue));\r\n}\r\n\r\nexport function serviceBusQueue(name: string, options: ServiceBusQueueFunctionOptions): void {\r\n    generic(name, convertToGenericOptions(options, trigger.serviceBusQueue));\r\n}\r\n\r\nexport function serviceBusTopic(name: string, options: ServiceBusTopicFunctionOptions): void {\r\n    generic(name, convertToGenericOptions(options, trigger.serviceBusTopic));\r\n}\r\n\r\nexport function eventHub(name: string, options: EventHubFunctionOptions): void {\r\n    generic(name, convertToGenericOptions(options, trigger.eventHub));\r\n}\r\n\r\nexport function eventGrid(name: string, options: EventGridFunctionOptions): void {\r\n    generic(name, convertToGenericOptions(options, trigger.eventGrid));\r\n}\r\n\r\nexport function cosmosDB(name: string, options: CosmosDBFunctionOptions): void {\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n    generic(name, convertToGenericOptions(options, <any>trigger.cosmosDB));\r\n}\r\n\r\nexport function warmup(name: string, options: WarmupFunctionOptions): void {\r\n    generic(name, convertToGenericOptions(options, trigger.warmup));\r\n}\r\n\r\nexport function generic(name: string, options: GenericFunctionOptions): void {\r\n    if (!hasSetup) {\r\n        setup();\r\n    }\r\n\r\n    const bindings: Record<string, coreTypes.RpcBindingInfo> = {};\r\n\r\n    const trigger = options.trigger;\r\n    bindings[trigger.name] = {\r\n        ...trigger,\r\n        direction: 'in',\r\n        type: isTrigger(trigger.type) ? trigger.type : trigger.type + 'Trigger',\r\n    };\r\n\r\n    if (options.extraInputs) {\r\n        for (const input of options.extraInputs) {\r\n            bindings[input.name] = {\r\n                ...input,\r\n                direction: 'in',\r\n            };\r\n        }\r\n    }\r\n\r\n    if (options.return) {\r\n        bindings[returnBindingKey] = {\r\n            ...options.return,\r\n            direction: 'out',\r\n        };\r\n    }\r\n\r\n    if (options.extraOutputs) {\r\n        for (const output of options.extraOutputs) {\r\n            bindings[output.name] = {\r\n                ...output,\r\n                direction: 'out',\r\n            };\r\n        }\r\n    }\r\n\r\n    let retryOptions: coreTypes.RpcRetryOptions | undefined;\r\n    if (options.retry) {\r\n        retryOptions = {\r\n            ...options.retry,\r\n            retryStrategy: options.retry.strategy,\r\n            delayInterval: toRpcDuration((<FixedDelayRetryOptions>options.retry).delayInterval, 'retry.delayInterval'),\r\n            maximumInterval: toRpcDuration(\r\n                (<ExponentialBackoffRetryOptions>options.retry).maximumInterval,\r\n                'retry.maximumInterval'\r\n            ),\r\n            minimumInterval: toRpcDuration(\r\n                (<ExponentialBackoffRetryOptions>options.retry).minimumInterval,\r\n                'retry.minimumInterval'\r\n            ),\r\n        };\r\n    }\r\n\r\n    const coreApi = tryGetCoreApiLazy();\r\n    if (!coreApi) {\r\n        console.warn(\r\n            `WARNING: Skipping call to register function \"${name}\" because the \"@azure/functions\" package is in test mode.`\r\n        );\r\n    } else {\r\n        coreApi.registerFunction({ name, bindings, retryOptions }, <FunctionCallback>options.handler);\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nexport const version = '4.2.0';\r\n\r\nexport const returnBindingKey = '$return';\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { EffectiveFunctionOptions, FunctionInput, FunctionOutput, FunctionTrigger } from '@azure/functions';\r\nimport { RpcBindingInfo } from '@azure/functions-core';\r\nimport { returnBindingKey } from '../constants';\r\nimport { isTrigger } from '../utils/isTrigger';\r\nimport { nonNullProp, nonNullValue } from '../utils/nonNull';\r\n\r\nexport function fromRpcBindings(bindings: Record<string, RpcBindingInfo> | null | undefined): EffectiveFunctionOptions {\r\n    let trigger: FunctionTrigger | undefined;\r\n    let returnBinding: FunctionOutput | undefined;\r\n    const extraInputs: FunctionInput[] = [];\r\n    const extraOutputs: FunctionOutput[] = [];\r\n    for (const [name, binding] of Object.entries(nonNullValue(bindings, 'bindings'))) {\r\n        if (isTrigger(binding.type)) {\r\n            trigger = fromRpcBinding(name, binding);\r\n        } else if (name === returnBindingKey) {\r\n            returnBinding = fromRpcBinding(name, binding);\r\n        } else if (binding.direction === 'in') {\r\n            extraInputs.push(fromRpcBinding(name, binding));\r\n        } else if (binding.direction === 'out') {\r\n            extraOutputs.push(fromRpcBinding(name, binding));\r\n        }\r\n    }\r\n    return {\r\n        trigger: nonNullValue(trigger, 'trigger'),\r\n        return: returnBinding,\r\n        extraInputs,\r\n        extraOutputs,\r\n    };\r\n}\r\n\r\nfunction fromRpcBinding(name: string, binding: RpcBindingInfo): FunctionTrigger | FunctionInput | FunctionOutput {\r\n    return {\r\n        ...binding,\r\n        type: nonNullProp(binding, 'type'),\r\n        name,\r\n    };\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { Exception, RetryContext, TraceContext } from '@azure/functions';\r\nimport { RpcException, RpcRetryContext, RpcTraceContext } from '@azure/functions-core';\r\nimport { copyPropIfDefined, nonNullProp } from '../utils/nonNull';\r\n\r\nexport function fromRpcRetryContext(retryContext: RpcRetryContext | null | undefined): RetryContext | undefined {\r\n    if (!retryContext) {\r\n        return undefined;\r\n    } else {\r\n        const result: RetryContext = {\r\n            retryCount: nonNullProp(retryContext, 'retryCount'),\r\n            maxRetryCount: nonNullProp(retryContext, 'maxRetryCount'),\r\n        };\r\n        if (retryContext.exception) {\r\n            result.exception = fromRpcException(retryContext.exception);\r\n        }\r\n        return result;\r\n    }\r\n}\r\n\r\nfunction fromRpcException(exception: RpcException): Exception {\r\n    const result: Exception = {};\r\n    copyPropIfDefined(exception, result, 'message');\r\n    copyPropIfDefined(exception, result, 'source');\r\n    copyPropIfDefined(exception, result, 'stackTrace');\r\n    return result;\r\n}\r\n\r\nexport function fromRpcTraceContext(traceContext: RpcTraceContext | null | undefined): TraceContext | undefined {\r\n    if (!traceContext) {\r\n        return undefined;\r\n    } else {\r\n        const result: TraceContext = {};\r\n        copyPropIfDefined(traceContext, result, 'traceParent');\r\n        copyPropIfDefined(traceContext, result, 'traceState');\r\n        if (traceContext.attributes) {\r\n            result.attributes = traceContext.attributes;\r\n        }\r\n        return result;\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { RpcNullableString } from '@azure/functions-core';\r\n\r\nexport function fromNullableMapping(\r\n    nullableMapping: Record<string, RpcNullableString> | null | undefined,\r\n    originalMapping?: Record<string, string> | null\r\n): Record<string, string> {\r\n    let converted: Record<string, string> = {};\r\n    if (nullableMapping && Object.keys(nullableMapping).length > 0) {\r\n        for (const key in nullableMapping) {\r\n            converted[key] = nullableMapping[key]?.value || '';\r\n        }\r\n    } else if (originalMapping && Object.keys(originalMapping).length > 0) {\r\n        converted = originalMapping;\r\n    }\r\n    return converted;\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { TriggerMetadata } from '@azure/functions';\r\nimport { RpcTypedData } from '@azure/functions-core';\r\nimport { isHttpTrigger, isTimerTrigger } from '../utils/isTrigger';\r\nimport { fromRpcTypedData } from './fromRpcTypedData';\r\nimport { toCamelCaseKey, toCamelCaseValue } from './toCamelCase';\r\n\r\nexport function fromRpcTriggerMetadata(\r\n    triggerMetadata: Record<string, RpcTypedData> | null | undefined,\r\n    triggerType: string\r\n): TriggerMetadata | undefined {\r\n    // For http and timer triggers, we will avoid using `triggerMetadata` for a few reasons:\r\n    // 1. It uses `toCamelCase` methods, which can lead to weird casing bugs\r\n    // 2. It's generally a large medley of properties that is difficult for us to document/type\r\n    // 3. We can represent that information on the request & timer objects instead\r\n    if (!triggerMetadata || isHttpTrigger(triggerType) || isTimerTrigger(triggerType)) {\r\n        return undefined;\r\n    } else {\r\n        const result: TriggerMetadata = {};\r\n        for (const [key, value] of Object.entries(triggerMetadata)) {\r\n            result[toCamelCaseKey(key)] = toCamelCaseValue(fromRpcTypedData(value));\r\n        }\r\n        return result;\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { RpcTypedData } from '@azure/functions-core';\r\nimport { HttpRequest } from '../http/HttpRequest';\r\nimport { isDefined } from '../utils/nonNull';\r\n\r\nexport function fromRpcTypedData(data: RpcTypedData | null | undefined): unknown {\r\n    if (!data) {\r\n        return undefined;\r\n    } else if (isDefined(data.string)) {\r\n        return tryJsonParse(data.string);\r\n    } else if (isDefined(data.json)) {\r\n        return JSON.parse(data.json);\r\n    } else if (isDefined(data.bytes)) {\r\n        return Buffer.from(data.bytes);\r\n    } else if (isDefined(data.stream)) {\r\n        return Buffer.from(data.stream);\r\n    } else if (isDefined(data.http)) {\r\n        return new HttpRequest(data.http);\r\n    } else if (isDefined(data.int)) {\r\n        return data.int;\r\n    } else if (isDefined(data.double)) {\r\n        return data.double;\r\n    } else if (data.collectionBytes && isDefined(data.collectionBytes.bytes)) {\r\n        return data.collectionBytes.bytes.map((d) => Buffer.from(d));\r\n    } else if (data.collectionString && isDefined(data.collectionString.string)) {\r\n        return data.collectionString.string.map(tryJsonParse);\r\n    } else if (data.collectionDouble && isDefined(data.collectionDouble.double)) {\r\n        return data.collectionDouble.double;\r\n    } else if (data.collectionSint64 && isDefined(data.collectionSint64.sint64)) {\r\n        return data.collectionSint64.sint64;\r\n    } else {\r\n        return undefined;\r\n    }\r\n}\r\n\r\nfunction tryJsonParse(data: string): unknown {\r\n    try {\r\n        return JSON.parse(data);\r\n    } catch {\r\n        return data;\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nexport function toCamelCaseValue(data: unknown): unknown {\r\n    if (typeof data !== 'object' || data === null) {\r\n        return data;\r\n    } else if (Array.isArray(data)) {\r\n        return data.map(toCamelCaseValue);\r\n    } else {\r\n        const result: Record<string, unknown> = {};\r\n        for (const [key, value] of Object.entries(data)) {\r\n            result[toCamelCaseKey(key)] = toCamelCaseValue(value);\r\n        }\r\n        return result;\r\n    }\r\n}\r\n\r\nexport function toCamelCaseKey(key: string): string {\r\n    return key.charAt(0).toLowerCase() + key.slice(1);\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { RpcDuration } from '@azure/functions-core';\r\nimport { Duration } from '../../types';\r\nimport { AzFuncSystemError } from '../errors';\r\nimport { isDefined } from '../utils/nonNull';\r\n\r\nexport function toRpcDuration(dateTime: Duration | number | undefined, propertyName: string): RpcDuration | undefined {\r\n    if (isDefined(dateTime)) {\r\n        try {\r\n            let timeInMilliseconds: number | undefined;\r\n            if (typeof dateTime === 'object') {\r\n                const minutes = (dateTime.minutes || 0) + (dateTime.hours || 0) * 60;\r\n                const seconds = (dateTime.seconds || 0) + minutes * 60;\r\n                timeInMilliseconds = (dateTime.milliseconds || 0) + seconds * 1000;\r\n            } else if (typeof dateTime === 'number') {\r\n                timeInMilliseconds = dateTime;\r\n            }\r\n\r\n            if (isDefined(timeInMilliseconds) && timeInMilliseconds >= 0) {\r\n                return {\r\n                    seconds: Math.round(timeInMilliseconds / 1000),\r\n                };\r\n            }\r\n        } catch {\r\n            // fall through\r\n        }\r\n\r\n        throw new AzFuncSystemError(\r\n            `A 'number' or 'Duration' object was expected instead of a '${typeof dateTime}'. Cannot parse value of '${propertyName}'.`\r\n        );\r\n    }\r\n\r\n    return undefined;\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { RpcHttpData, RpcTypedData } from '@azure/functions-core';\r\nimport { AzFuncSystemError } from '../errors';\r\nimport { HttpResponse } from '../http/HttpResponse';\r\nimport { toRpcHttpCookie } from './toRpcHttpCookie';\r\nimport { toRpcTypedData } from './toRpcTypedData';\r\n\r\nexport async function toRpcHttp(data: unknown): Promise<RpcTypedData | null | undefined> {\r\n    if (data === null || data === undefined) {\r\n        return data;\r\n    } else if (typeof data !== 'object') {\r\n        throw new AzFuncSystemError(\r\n            'The HTTP response must be an object with optional properties \"body\", \"status\", \"headers\", and \"cookies\".'\r\n        );\r\n    }\r\n\r\n    const response = data instanceof HttpResponse ? data : new HttpResponse(data);\r\n    const rpcResponse: RpcHttpData = {};\r\n    rpcResponse.statusCode = response.status.toString();\r\n\r\n    rpcResponse.headers = {};\r\n    for (const [key, value] of response.headers.entries()) {\r\n        rpcResponse.headers[key] = value;\r\n    }\r\n\r\n    rpcResponse.cookies = [];\r\n    for (const cookie of response.cookies) {\r\n        rpcResponse.cookies.push(toRpcHttpCookie(cookie));\r\n    }\r\n\r\n    rpcResponse.enableContentNegotiation = response.enableContentNegotiation;\r\n\r\n    const bodyBytes = await response.arrayBuffer();\r\n    rpcResponse.body = toRpcTypedData(bodyBytes);\r\n\r\n    return { http: rpcResponse };\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { Cookie } from '@azure/functions';\r\nimport { RpcHttpCookie, RpcHttpCookieSameSite } from '@azure/functions-core';\r\nimport { toNullableBool, toNullableDouble, toNullableString, toNullableTimestamp, toRpcString } from './toRpcNullable';\r\n\r\n/**\r\n * From RFC specifications for 'Set-Cookie' response header: https://www.rfc-editor.org/rfc/rfc6265.txt\r\n * @param inputCookie\r\n */\r\nexport function toRpcHttpCookie(inputCookie: Cookie): RpcHttpCookie {\r\n    // Resolve RpcHttpCookie.SameSite enum, a one-off\r\n    let rpcSameSite: RpcHttpCookieSameSite = 'none';\r\n    if (inputCookie && inputCookie.sameSite) {\r\n        const sameSite = inputCookie.sameSite.toLocaleLowerCase();\r\n        if (sameSite === 'lax') {\r\n            rpcSameSite = 'lax';\r\n        } else if (sameSite === 'strict') {\r\n            rpcSameSite = 'strict';\r\n        } else if (sameSite === 'none') {\r\n            rpcSameSite = 'explicitNone';\r\n        }\r\n    }\r\n\r\n    const rpcCookie: RpcHttpCookie = {\r\n        name: inputCookie && toRpcString(inputCookie.name, 'cookie.name'),\r\n        value: inputCookie && toRpcString(inputCookie.value, 'cookie.value'),\r\n        domain: toNullableString(inputCookie && inputCookie.domain, 'cookie.domain'),\r\n        path: toNullableString(inputCookie && inputCookie.path, 'cookie.path'),\r\n        expires: toNullableTimestamp(inputCookie && inputCookie.expires, 'cookie.expires'),\r\n        secure: toNullableBool(inputCookie && inputCookie.secure, 'cookie.secure'),\r\n        httpOnly: toNullableBool(inputCookie && inputCookie.httpOnly, 'cookie.httpOnly'),\r\n        sameSite: rpcSameSite,\r\n        maxAge: toNullableDouble(inputCookie && inputCookie.maxAge, 'cookie.maxAge'),\r\n    };\r\n\r\n    return rpcCookie;\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { RpcNullableBool, RpcNullableDouble, RpcNullableString, RpcNullableTimestamp } from '@azure/functions-core';\r\nimport { AzFuncSystemError } from '../errors';\r\nimport { isDefined } from '../utils/nonNull';\r\n\r\n/**\r\n * Converts boolean input to an 'INullableBool' to be sent through the RPC layer.\r\n * Input that is not a boolean but is also not null or undefined logs a function app level warning.\r\n * @param nullable Input to be converted to an INullableBool if it is a valid boolean\r\n * @param propertyName The name of the property that the caller will assign the output to. Used for debugging.\r\n */\r\nexport function toNullableBool(nullable: boolean | undefined, propertyName: string): undefined | RpcNullableBool {\r\n    if (typeof nullable === 'boolean') {\r\n        return <RpcNullableBool>{\r\n            value: nullable,\r\n        };\r\n    }\r\n\r\n    if (isDefined(nullable)) {\r\n        throw new AzFuncSystemError(\r\n            `A 'boolean' type was expected instead of a '${typeof nullable}' type. Cannot parse value of '${propertyName}'.`\r\n        );\r\n    }\r\n\r\n    return undefined;\r\n}\r\n\r\n/**\r\n * Converts number or string that parses to a number to an 'INullableDouble' to be sent through the RPC layer.\r\n * Input that is not a valid number but is also not null or undefined logs a function app level warning.\r\n * @param nullable Input to be converted to an INullableDouble if it is a valid number\r\n * @param propertyName The name of the property that the caller will assign the output to. Used for debugging.\r\n */\r\nexport function toNullableDouble(\r\n    nullable: number | string | undefined,\r\n    propertyName: string\r\n): undefined | RpcNullableDouble {\r\n    if (typeof nullable === 'number') {\r\n        return <RpcNullableDouble>{\r\n            value: nullable,\r\n        };\r\n    } else if (typeof nullable === 'string') {\r\n        if (!isNaN(Number(nullable))) {\r\n            const parsedNumber = parseFloat(nullable);\r\n            return <RpcNullableDouble>{\r\n                value: parsedNumber,\r\n            };\r\n        }\r\n    }\r\n\r\n    if (isDefined(nullable)) {\r\n        throw new AzFuncSystemError(\r\n            `A 'number' type was expected instead of a '${typeof nullable}' type. Cannot parse value of '${propertyName}'.`\r\n        );\r\n    }\r\n\r\n    return undefined;\r\n}\r\n\r\n/**\r\n * Converts string input to an 'INullableString' to be sent through the RPC layer.\r\n * Input that is not a string but is also not null or undefined logs a function app level warning.\r\n * @param nullable Input to be converted to an INullableString if it is a valid string\r\n * @param propertyName The name of the property that the caller will assign the output to. Used for debugging.\r\n */\r\nexport function toRpcString(nullable: string | undefined, propertyName: string): string {\r\n    if (typeof nullable === 'string') {\r\n        return nullable;\r\n    }\r\n\r\n    if (isDefined(nullable)) {\r\n        throw new AzFuncSystemError(\r\n            `A 'string' type was expected instead of a '${typeof nullable}' type. Cannot parse value of '${propertyName}'.`\r\n        );\r\n    }\r\n\r\n    return '';\r\n}\r\n\r\n/**\r\n * Converts string input to an 'INullableString' to be sent through the RPC layer.\r\n * Input that is not a string but is also not null or undefined logs a function app level warning.\r\n * @param nullable Input to be converted to an INullableString if it is a valid string\r\n * @param propertyName The name of the property that the caller will assign the output to. Used for debugging.\r\n */\r\nexport function toNullableString(nullable: string | undefined, propertyName: string): undefined | RpcNullableString {\r\n    if (typeof nullable === 'string') {\r\n        return <RpcNullableString>{\r\n            value: nullable,\r\n        };\r\n    }\r\n\r\n    if (isDefined(nullable)) {\r\n        throw new AzFuncSystemError(\r\n            `A 'string' type was expected instead of a '${typeof nullable}' type. Cannot parse value of '${propertyName}'.`\r\n        );\r\n    }\r\n\r\n    return undefined;\r\n}\r\n\r\n/**\r\n * Converts Date or number input to an 'INullableTimestamp' to be sent through the RPC layer.\r\n * Input that is not a Date or number but is also not null or undefined logs a function app level warning.\r\n * @param nullable Input to be converted to an INullableTimestamp if it is valid input\r\n * @param propertyName The name of the property that the caller will assign the output to. Used for debugging.\r\n */\r\nexport function toNullableTimestamp(\r\n    dateTime: Date | number | undefined,\r\n    propertyName: string\r\n): RpcNullableTimestamp | undefined {\r\n    if (isDefined(dateTime)) {\r\n        try {\r\n            const timeInMilliseconds = typeof dateTime === 'number' ? dateTime : dateTime.getTime();\r\n\r\n            if (timeInMilliseconds && timeInMilliseconds >= 0) {\r\n                return {\r\n                    value: {\r\n                        seconds: Math.round(timeInMilliseconds / 1000),\r\n                    },\r\n                };\r\n            }\r\n        } catch {\r\n            throw new AzFuncSystemError(\r\n                `A 'number' or 'Date' input was expected instead of a '${typeof dateTime}'. Cannot parse value of '${propertyName}'.`\r\n            );\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { RpcTypedData } from '@azure/functions-core';\r\n\r\nexport function toRpcTypedData(data: unknown): RpcTypedData | null | undefined {\r\n    if (data === null || data === undefined) {\r\n        return data;\r\n    } else if (typeof data === 'string') {\r\n        return { string: data };\r\n    } else if (Buffer.isBuffer(data)) {\r\n        return { bytes: data };\r\n    } else if (ArrayBuffer.isView(data)) {\r\n        const bytes = new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\r\n        return { bytes: bytes };\r\n    } else if (data instanceof ArrayBuffer) {\r\n        const bytes = new Uint8Array(data);\r\n        return { bytes: bytes };\r\n    } else if (typeof data === 'number') {\r\n        if (Number.isInteger(data)) {\r\n            return { int: data };\r\n        } else {\r\n            return { double: data };\r\n        }\r\n    } else {\r\n        return { json: JSON.stringify(data) };\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nexport interface AzFuncError {\r\n    /**\r\n     * System errors can be tracked in our telemetry\r\n     * User errors cannot be tracked in our telemetry because they could have user information (users can still track it themselves in their app insights resource)\r\n     */\r\n    isAzureFunctionsSystemError: boolean;\r\n}\r\n\r\nexport class AzFuncSystemError extends Error {\r\n    isAzureFunctionsSystemError = true;\r\n}\r\n\r\nexport class AzFuncTypeError extends TypeError implements AzFuncError {\r\n    isAzureFunctionsSystemError = true;\r\n}\r\n\r\nexport class AzFuncRangeError extends RangeError implements AzFuncError {\r\n    isAzureFunctionsSystemError = true;\r\n}\r\n\r\nexport class ReadOnlyError extends AzFuncTypeError {\r\n    constructor(propertyName: string) {\r\n        super(`Cannot assign to read only property '${propertyName}'`);\r\n    }\r\n}\r\n\r\nexport function ensureErrorType(err: unknown): Error & Partial<AzFuncError> {\r\n    if (err instanceof Error) {\r\n        return err;\r\n    } else {\r\n        let message: string;\r\n        if (err === undefined || err === null) {\r\n            message = 'Unknown error';\r\n        } else if (typeof err === 'string') {\r\n            message = err;\r\n        } else if (typeof err === 'object') {\r\n            message = JSON.stringify(err);\r\n        } else {\r\n            message = String(err);\r\n        }\r\n        return new Error(message);\r\n    }\r\n}\r\n\r\n/**\r\n * This is mostly for callbacks where `null` or `undefined` indicates there is no error\r\n * By contrast, anything thrown/caught is assumed to be an error regardless of what it is\r\n */\r\nexport function isError(err: unknown): boolean {\r\n    return err !== null && err !== undefined;\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport * as types from '@azure/functions';\r\nimport { HookContext } from './HookContext';\r\n\r\nexport class AppStartContext extends HookContext implements types.AppStartContext {}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport * as types from '@azure/functions';\r\nimport { HookContext } from './HookContext';\r\n\r\nexport class AppTerminateContext extends HookContext implements types.AppTerminateContext {}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport * as types from '@azure/functions';\r\nimport { ReadOnlyError } from '../errors';\r\nimport { nonNullProp } from '../utils/nonNull';\r\n\r\nexport class HookContext implements types.HookContext {\r\n    #init: types.HookContextInit;\r\n\r\n    constructor(init?: types.HookContextInit) {\r\n        this.#init = init ?? {};\r\n        this.#init.hookData ??= {};\r\n    }\r\n\r\n    get hookData(): Record<string, unknown> {\r\n        return nonNullProp(this.#init, 'hookData');\r\n    }\r\n\r\n    set hookData(_value: unknown) {\r\n        throw new ReadOnlyError('hookData');\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport * as types from '@azure/functions';\r\nimport { ReadOnlyError } from '../errors';\r\nimport { InvocationContext } from '../InvocationContext';\r\nimport { nonNullProp } from '../utils/nonNull';\r\nimport { HookContext } from './HookContext';\r\n\r\nexport class InvocationHookContext extends HookContext implements types.InvocationHookContext {\r\n    #init: types.InvocationHookContextInit;\r\n\r\n    constructor(init?: types.InvocationHookContextInit) {\r\n        super(init);\r\n        this.#init = init ?? {};\r\n        this.#init.inputs ??= [];\r\n        this.#init.invocationContext ??= new InvocationContext();\r\n    }\r\n\r\n    get invocationContext(): types.InvocationContext {\r\n        return nonNullProp(this.#init, 'invocationContext');\r\n    }\r\n\r\n    set invocationContext(_value: types.InvocationContext) {\r\n        throw new ReadOnlyError('invocationContext');\r\n    }\r\n\r\n    get inputs(): unknown[] {\r\n        return nonNullProp(this.#init, 'inputs');\r\n    }\r\n\r\n    set inputs(value: unknown[]) {\r\n        this.#init.inputs = value;\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport * as types from '@azure/functions';\r\nimport { InvocationHookContext } from './InvocationHookContext';\r\n\r\nexport class PostInvocationContext extends InvocationHookContext implements types.PostInvocationContext {\r\n    #init: types.PostInvocationContextInit;\r\n\r\n    constructor(init?: types.PostInvocationContextInit) {\r\n        super(init);\r\n        this.#init = init ?? {};\r\n    }\r\n\r\n    get result(): unknown {\r\n        return this.#init.result;\r\n    }\r\n\r\n    set result(value: unknown) {\r\n        this.#init.result = value;\r\n    }\r\n\r\n    get error(): unknown {\r\n        return this.#init.error;\r\n    }\r\n\r\n    set error(value: unknown) {\r\n        this.#init.error = value;\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport * as types from '@azure/functions';\r\nimport { nonNullProp } from '../utils/nonNull';\r\nimport { InvocationHookContext } from './InvocationHookContext';\r\n\r\nexport class PreInvocationContext extends InvocationHookContext implements types.PreInvocationContext {\r\n    #init: types.PreInvocationContextInit;\r\n\r\n    constructor(init?: types.PreInvocationContextInit) {\r\n        super(init);\r\n        this.#init = init ?? {};\r\n        this.#init.functionCallback ??= () => {};\r\n    }\r\n\r\n    get functionHandler(): types.FunctionHandler {\r\n        return nonNullProp(this.#init, 'functionCallback');\r\n    }\r\n\r\n    set functionHandler(value: types.FunctionHandler) {\r\n        this.#init.functionCallback = value;\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { AppStartHandler, AppTerminateHandler, PostInvocationHandler, PreInvocationHandler } from '@azure/functions';\r\nimport * as coreTypes from '@azure/functions-core';\r\nimport { Disposable } from '../utils/Disposable';\r\nimport { tryGetCoreApiLazy } from '../utils/tryGetCoreApiLazy';\r\nimport { AppStartContext } from './AppStartContext';\r\nimport { AppTerminateContext } from './AppTerminateContext';\r\nimport { PostInvocationContext } from './PostInvocationContext';\r\nimport { PreInvocationContext } from './PreInvocationContext';\r\n\r\nfunction registerHook(hookName: string, callback: coreTypes.HookCallback): coreTypes.Disposable {\r\n    const coreApi = tryGetCoreApiLazy();\r\n    if (!coreApi) {\r\n        console.warn(\r\n            `WARNING: Skipping call to register ${hookName} hook because the \"@azure/functions\" package is in test mode.`\r\n        );\r\n        return new Disposable(() => {\r\n            console.warn(\r\n                `WARNING: Skipping call to dispose ${hookName} hook because the \"@azure/functions\" package is in test mode.`\r\n            );\r\n        });\r\n    } else {\r\n        return coreApi.registerHook(hookName, callback);\r\n    }\r\n}\r\n\r\nexport function appStart(handler: AppStartHandler): Disposable {\r\n    return registerHook('appStart', (coreContext) => {\r\n        return handler(new AppStartContext(coreContext));\r\n    });\r\n}\r\n\r\nexport function appTerminate(handler: AppTerminateHandler): Disposable {\r\n    return registerHook('appTerminate', (coreContext) => {\r\n        return handler(new AppTerminateContext(coreContext));\r\n    });\r\n}\r\n\r\nexport function preInvocation(handler: PreInvocationHandler): Disposable {\r\n    return registerHook('preInvocation', (coreContext) => {\r\n        return handler(new PreInvocationContext(coreContext));\r\n    });\r\n}\r\n\r\nexport function postInvocation(handler: PostInvocationHandler): Disposable {\r\n    return registerHook('postInvocation', (coreContext) => {\r\n        return handler(new PostInvocationContext(coreContext));\r\n    });\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport * as types from '@azure/functions';\r\nimport { HttpRequestParams, HttpRequestUser } from '@azure/functions';\r\nimport { RpcHttpData } from '@azure/functions-core';\r\nimport { Blob } from 'buffer';\r\nimport { ReadableStream } from 'stream/web';\r\nimport { FormData, Headers, Request as uRequest } from 'undici';\r\nimport { URLSearchParams } from 'url';\r\nimport { fromNullableMapping } from '../converters/fromRpcNullable';\r\nimport { nonNullProp } from '../utils/nonNull';\r\nimport { extractHttpUserFromHeaders } from './extractHttpUserFromHeaders';\r\n\r\ninterface InternalHttpRequestInit extends RpcHttpData {\r\n    undiciRequest?: uRequest;\r\n}\r\n\r\nexport class HttpRequest implements types.HttpRequest {\r\n    readonly query: URLSearchParams;\r\n    readonly params: HttpRequestParams;\r\n\r\n    #cachedUser?: HttpRequestUser | null;\r\n    #uReq: uRequest;\r\n    #init: InternalHttpRequestInit;\r\n\r\n    constructor(init: InternalHttpRequestInit) {\r\n        this.#init = init;\r\n\r\n        if (init.undiciRequest) {\r\n            this.#uReq = init.undiciRequest;\r\n        } else {\r\n            const url = nonNullProp(init, 'url');\r\n\r\n            let body: Buffer | string | undefined;\r\n            if (init.body?.bytes) {\r\n                body = Buffer.from(init.body?.bytes);\r\n            } else if (init.body?.string) {\r\n                body = init.body.string;\r\n            }\r\n\r\n            this.#uReq = new uRequest(url, {\r\n                body,\r\n                method: nonNullProp(init, 'method'),\r\n                headers: fromNullableMapping(init.nullableHeaders, init.headers),\r\n            });\r\n        }\r\n\r\n        this.query = new URLSearchParams(fromNullableMapping(init.nullableQuery, init.query));\r\n        this.params = fromNullableMapping(init.nullableParams, init.params);\r\n    }\r\n\r\n    get url(): string {\r\n        return this.#uReq.url;\r\n    }\r\n\r\n    get method(): string {\r\n        return this.#uReq.method;\r\n    }\r\n\r\n    get headers(): Headers {\r\n        return this.#uReq.headers;\r\n    }\r\n\r\n    get user(): HttpRequestUser | null {\r\n        if (this.#cachedUser === undefined) {\r\n            this.#cachedUser = extractHttpUserFromHeaders(this.headers);\r\n        }\r\n\r\n        return this.#cachedUser;\r\n    }\r\n\r\n    get body(): ReadableStream<any> | null {\r\n        return this.#uReq.body;\r\n    }\r\n\r\n    get bodyUsed(): boolean {\r\n        return this.#uReq.bodyUsed;\r\n    }\r\n\r\n    async arrayBuffer(): Promise<ArrayBuffer> {\r\n        return this.#uReq.arrayBuffer();\r\n    }\r\n\r\n    async blob(): Promise<Blob> {\r\n        return this.#uReq.blob();\r\n    }\r\n\r\n    async formData(): Promise<FormData> {\r\n        return this.#uReq.formData();\r\n    }\r\n\r\n    async json(): Promise<unknown> {\r\n        return this.#uReq.json();\r\n    }\r\n\r\n    async text(): Promise<string> {\r\n        return this.#uReq.text();\r\n    }\r\n\r\n    clone(): HttpRequest {\r\n        const newInit = structuredClone(this.#init);\r\n        newInit.undiciRequest = this.#uReq.clone();\r\n        return new HttpRequest(newInit);\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport * as types from '@azure/functions';\r\nimport { HttpResponseInit } from '@azure/functions';\r\nimport { Blob } from 'buffer';\r\nimport { ReadableStream } from 'stream/web';\r\nimport { FormData, Headers, Response as uResponse, ResponseInit as uResponseInit } from 'undici';\r\nimport { isDefined } from '../utils/nonNull';\r\n\r\ninterface InternalHttpResponseInit extends HttpResponseInit {\r\n    undiciResponse?: uResponse;\r\n}\r\n\r\nexport class HttpResponse implements types.HttpResponse {\r\n    readonly cookies: types.Cookie[];\r\n    readonly enableContentNegotiation: boolean;\r\n\r\n    #uRes: uResponse;\r\n    #init: InternalHttpResponseInit;\r\n\r\n    constructor(init?: InternalHttpResponseInit) {\r\n        init ??= {};\r\n        this.#init = init;\r\n\r\n        if (init.undiciResponse) {\r\n            this.#uRes = init.undiciResponse;\r\n        } else {\r\n            const uResInit: uResponseInit = { status: init.status, headers: init.headers };\r\n            if (isDefined(init.jsonBody)) {\r\n                this.#uRes = uResponse.json(init.jsonBody, uResInit);\r\n            } else {\r\n                this.#uRes = new uResponse(init.body, uResInit);\r\n            }\r\n        }\r\n\r\n        this.cookies = init.cookies ?? [];\r\n        this.enableContentNegotiation = !!init.enableContentNegotiation;\r\n    }\r\n\r\n    get status(): number {\r\n        return this.#uRes.status;\r\n    }\r\n\r\n    get headers(): Headers {\r\n        return this.#uRes.headers;\r\n    }\r\n\r\n    get body(): ReadableStream<any> | null {\r\n        return this.#uRes.body;\r\n    }\r\n\r\n    get bodyUsed(): boolean {\r\n        return this.#uRes.bodyUsed;\r\n    }\r\n\r\n    async arrayBuffer(): Promise<ArrayBuffer> {\r\n        return this.#uRes.arrayBuffer();\r\n    }\r\n\r\n    async blob(): Promise<Blob> {\r\n        return this.#uRes.blob();\r\n    }\r\n\r\n    async formData(): Promise<FormData> {\r\n        return this.#uRes.formData();\r\n    }\r\n\r\n    async json(): Promise<unknown> {\r\n        return this.#uRes.json();\r\n    }\r\n\r\n    async text(): Promise<string> {\r\n        return this.#uRes.text();\r\n    }\r\n\r\n    clone(): HttpResponse {\r\n        const newInit = structuredClone(this.#init);\r\n        newInit.undiciResponse = this.#uRes.clone();\r\n        return new HttpResponse(newInit);\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { HttpRequestUser } from '@azure/functions';\r\nimport { Headers } from 'undici';\r\nimport { nonNullValue } from '../utils/nonNull';\r\n\r\n/* grandfathered in. Should fix when possible */\r\n/* eslint-disable @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-unsafe-member-access */\r\n\r\nexport function extractHttpUserFromHeaders(headers: Headers): HttpRequestUser | null {\r\n    let user: HttpRequestUser | null = null;\r\n\r\n    const clientPrincipal = headers.get('x-ms-client-principal');\r\n    if (clientPrincipal) {\r\n        const claimsPrincipalData = JSON.parse(Buffer.from(clientPrincipal, 'base64').toString('utf-8'));\r\n\r\n        if (claimsPrincipalData['identityProvider']) {\r\n            user = {\r\n                type: 'StaticWebApps',\r\n                id: claimsPrincipalData['userId'],\r\n                username: claimsPrincipalData['userDetails'],\r\n                identityProvider: claimsPrincipalData['identityProvider'],\r\n                claimsPrincipalData,\r\n            };\r\n        } else {\r\n            user = {\r\n                type: 'AppService',\r\n                id: nonNullValue(headers.get('x-ms-client-principal-id'), 'user-id'),\r\n                username: nonNullValue(headers.get('x-ms-client-principal-name'), 'user-name'),\r\n                identityProvider: nonNullValue(headers.get('x-ms-client-principal-idp'), 'user-idp'),\r\n                claimsPrincipalData,\r\n            };\r\n        }\r\n    }\r\n\r\n    return user;\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport {\r\n    CosmosDBInput,\r\n    CosmosDBInputOptions,\r\n    FunctionInput,\r\n    GenericInputOptions,\r\n    SqlInput,\r\n    SqlInputOptions,\r\n    StorageBlobInput,\r\n    StorageBlobInputOptions,\r\n    TableInput,\r\n    TableInputOptions,\r\n} from '@azure/functions';\r\nimport { addBindingName } from './addBindingName';\r\n\r\nexport function storageBlob(options: StorageBlobInputOptions): StorageBlobInput {\r\n    return addInputBindingName({\r\n        ...options,\r\n        type: 'blob',\r\n    });\r\n}\r\n\r\nexport function table(options: TableInputOptions): TableInput {\r\n    return addInputBindingName({\r\n        ...options,\r\n        type: 'table',\r\n    });\r\n}\r\n\r\nexport function cosmosDB(options: CosmosDBInputOptions): CosmosDBInput {\r\n    return addInputBindingName({\r\n        ...options,\r\n        type: 'cosmosDB',\r\n    });\r\n}\r\n\r\nexport function sql(options: SqlInputOptions): SqlInput {\r\n    return addInputBindingName({\r\n        ...options,\r\n        type: 'sql',\r\n    });\r\n}\r\n\r\nexport function generic(options: GenericInputOptions): FunctionInput {\r\n    return addInputBindingName(options);\r\n}\r\n\r\nfunction addInputBindingName<T extends { type: string; name?: string }>(binding: T): T & { name: string } {\r\n    return addBindingName(binding, 'Input');\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport {\r\n    CosmosDBOutput,\r\n    CosmosDBOutputOptions,\r\n    EventGridOutput,\r\n    EventGridOutputOptions,\r\n    EventHubOutput,\r\n    EventHubOutputOptions,\r\n    FunctionOutput,\r\n    GenericOutputOptions,\r\n    HttpOutput,\r\n    HttpOutputOptions,\r\n    ServiceBusQueueOutput,\r\n    ServiceBusQueueOutputOptions,\r\n    ServiceBusTopicOutput,\r\n    ServiceBusTopicOutputOptions,\r\n    SqlOutput,\r\n    SqlOutputOptions,\r\n    StorageBlobOutput,\r\n    StorageBlobOutputOptions,\r\n    StorageQueueOutput,\r\n    StorageQueueOutputOptions,\r\n    TableOutput,\r\n    TableOutputOptions,\r\n} from '@azure/functions';\r\nimport { addBindingName } from './addBindingName';\r\n\r\nexport function http(options: HttpOutputOptions): HttpOutput {\r\n    return addOutputBindingName({\r\n        ...options,\r\n        type: 'http',\r\n    });\r\n}\r\n\r\nexport function storageBlob(options: StorageBlobOutputOptions): StorageBlobOutput {\r\n    return addOutputBindingName({\r\n        ...options,\r\n        type: 'blob',\r\n    });\r\n}\r\n\r\nexport function table(options: TableOutputOptions): TableOutput {\r\n    return addOutputBindingName({\r\n        ...options,\r\n        type: 'table',\r\n    });\r\n}\r\n\r\nexport function storageQueue(options: StorageQueueOutputOptions): StorageQueueOutput {\r\n    return addOutputBindingName({\r\n        ...options,\r\n        type: 'queue',\r\n    });\r\n}\r\n\r\nexport function serviceBusQueue(options: ServiceBusQueueOutputOptions): ServiceBusQueueOutput {\r\n    return addOutputBindingName({\r\n        ...options,\r\n        type: 'serviceBus',\r\n    });\r\n}\r\n\r\nexport function serviceBusTopic(options: ServiceBusTopicOutputOptions): ServiceBusTopicOutput {\r\n    return addOutputBindingName({\r\n        ...options,\r\n        type: 'serviceBus',\r\n    });\r\n}\r\n\r\nexport function eventHub(options: EventHubOutputOptions): EventHubOutput {\r\n    return addOutputBindingName({\r\n        ...options,\r\n        type: 'eventHub',\r\n    });\r\n}\r\n\r\nexport function eventGrid(options: EventGridOutputOptions): EventGridOutput {\r\n    return addOutputBindingName({\r\n        ...options,\r\n        type: 'eventGrid',\r\n    });\r\n}\r\n\r\nexport function cosmosDB(options: CosmosDBOutputOptions): CosmosDBOutput {\r\n    return addOutputBindingName({\r\n        ...options,\r\n        type: 'cosmosDB',\r\n    });\r\n}\r\n\r\nexport function sql(options: SqlOutputOptions): SqlOutput {\r\n    return addOutputBindingName({\r\n        ...options,\r\n        type: 'sql',\r\n    });\r\n}\r\n\r\nexport function generic(options: GenericOutputOptions): FunctionOutput {\r\n    return addOutputBindingName(options);\r\n}\r\n\r\nfunction addOutputBindingName<T extends { type: string; name?: string }>(binding: T): T & { name: string } {\r\n    return addBindingName(binding, 'Output');\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport {\r\n    CosmosDBTrigger,\r\n    CosmosDBTriggerOptions,\r\n    EventGridTrigger,\r\n    EventGridTriggerOptions,\r\n    EventHubTrigger,\r\n    EventHubTriggerOptions,\r\n    FunctionTrigger,\r\n    GenericTriggerOptions,\r\n    HttpTrigger,\r\n    HttpTriggerOptions,\r\n    ServiceBusQueueTrigger,\r\n    ServiceBusQueueTriggerOptions,\r\n    ServiceBusTopicTrigger,\r\n    ServiceBusTopicTriggerOptions,\r\n    StorageBlobTrigger,\r\n    StorageBlobTriggerOptions,\r\n    StorageQueueTrigger,\r\n    StorageQueueTriggerOptions,\r\n    TimerTrigger,\r\n    TimerTriggerOptions,\r\n    WarmupTrigger,\r\n    WarmupTriggerOptions,\r\n} from '@azure/functions';\r\nimport { addBindingName } from './addBindingName';\r\n\r\nexport function http(options: HttpTriggerOptions): HttpTrigger {\r\n    return addTriggerBindingName({\r\n        ...options,\r\n        authLevel: options.authLevel || 'anonymous',\r\n        methods: options.methods || ['GET', 'POST'],\r\n        type: 'httpTrigger',\r\n    });\r\n}\r\n\r\nexport function timer(options: TimerTriggerOptions): TimerTrigger {\r\n    return addTriggerBindingName({\r\n        ...options,\r\n        type: 'timerTrigger',\r\n    });\r\n}\r\n\r\nexport function storageBlob(options: StorageBlobTriggerOptions): StorageBlobTrigger {\r\n    return addTriggerBindingName({\r\n        ...options,\r\n        type: 'blobTrigger',\r\n    });\r\n}\r\n\r\nexport function storageQueue(options: StorageQueueTriggerOptions): StorageQueueTrigger {\r\n    return addTriggerBindingName({\r\n        ...options,\r\n        type: 'queueTrigger',\r\n    });\r\n}\r\n\r\nexport function serviceBusQueue(options: ServiceBusQueueTriggerOptions): ServiceBusQueueTrigger {\r\n    return addTriggerBindingName({\r\n        ...options,\r\n        type: 'serviceBusTrigger',\r\n    });\r\n}\r\n\r\nexport function serviceBusTopic(options: ServiceBusTopicTriggerOptions): ServiceBusTopicTrigger {\r\n    return addTriggerBindingName({\r\n        ...options,\r\n        type: 'serviceBusTrigger',\r\n    });\r\n}\r\n\r\nexport function eventHub(options: EventHubTriggerOptions): EventHubTrigger {\r\n    return addTriggerBindingName({\r\n        ...options,\r\n        type: 'eventHubTrigger',\r\n    });\r\n}\r\n\r\nexport function eventGrid(options: EventGridTriggerOptions): EventGridTrigger {\r\n    return addTriggerBindingName({\r\n        ...options,\r\n        type: 'eventGridTrigger',\r\n    });\r\n}\r\n\r\nexport function cosmosDB(options: CosmosDBTriggerOptions): CosmosDBTrigger {\r\n    return addTriggerBindingName({\r\n        ...options,\r\n        type: 'cosmosDBTrigger',\r\n    });\r\n}\r\n\r\nexport function warmup(options: WarmupTriggerOptions): WarmupTrigger {\r\n    return addTriggerBindingName({\r\n        ...options,\r\n        type: 'warmupTrigger',\r\n    });\r\n}\r\n\r\nexport function generic(options: GenericTriggerOptions): FunctionTrigger {\r\n    return addTriggerBindingName(options);\r\n}\r\n\r\nfunction addTriggerBindingName<T extends { type: string; name?: string }>(binding: T): T & { name: string } {\r\n    return addBindingName(binding, 'Trigger');\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\n/**\r\n * Based off of VS Code\r\n * https://github.com/microsoft/vscode/blob/7bed4ce3e9f5059b5fc638c348f064edabcce5d2/src/vs/workbench/api/common/extHostTypes.ts#L65\r\n */\r\nexport class Disposable {\r\n    static from(...inDisposables: { dispose(): any }[]): Disposable {\r\n        let disposables: ReadonlyArray<{ dispose(): any }> | undefined = inDisposables;\r\n        return new Disposable(function () {\r\n            if (disposables) {\r\n                for (const disposable of disposables) {\r\n                    if (disposable && typeof disposable.dispose === 'function') {\r\n                        disposable.dispose();\r\n                    }\r\n                }\r\n                disposables = undefined;\r\n            }\r\n        });\r\n    }\r\n\r\n    #callOnDispose?: () => any;\r\n\r\n    constructor(callOnDispose: () => any) {\r\n        this.#callOnDispose = callOnDispose;\r\n    }\r\n\r\n    dispose(): any {\r\n        if (typeof this.#callOnDispose === 'function') {\r\n            this.#callOnDispose();\r\n            this.#callOnDispose = undefined;\r\n        }\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nexport function isTrigger(typeName: string | undefined | null): boolean {\r\n    return !!typeName && /trigger$/i.test(typeName);\r\n}\r\n\r\nexport function isHttpTrigger(typeName: string | undefined | null): boolean {\r\n    return typeName?.toLowerCase() === 'httptrigger';\r\n}\r\n\r\nexport function isTimerTrigger(typeName: string | undefined | null): boolean {\r\n    return typeName?.toLowerCase() === 'timertrigger';\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { AzFuncSystemError } from '../errors';\r\n\r\n/**\r\n * Retrieves a property by name from an object and checks that it's not null and not undefined.  It is strongly typed\r\n * for the property and will give a compile error if the given name is not a property of the source.\r\n */\r\nexport function nonNullProp<TSource, TKey extends keyof TSource>(\r\n    source: TSource,\r\n    name: TKey\r\n): NonNullable<TSource[TKey]> {\r\n    const value: NonNullable<TSource[TKey]> = <NonNullable<TSource[TKey]>>source[name];\r\n    return nonNullValue(value, <string>name);\r\n}\r\n\r\n/**\r\n * Validates that a given value is not null and not undefined.\r\n */\r\nexport function nonNullValue<T>(value: T | undefined | null, propertyNameOrMessage?: string): T {\r\n    if (value === null || value === undefined) {\r\n        throw new AzFuncSystemError(\r\n            'Internal error: Expected value to be neither null nor undefined' +\r\n                (propertyNameOrMessage ? `: ${propertyNameOrMessage}` : '')\r\n        );\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\nexport function copyPropIfDefined<TData, TKey extends keyof TData>(source: TData, destination: TData, key: TKey): void {\r\n    if (source[key] !== null && source[key] !== undefined) {\r\n        destination[key] = source[key];\r\n    }\r\n}\r\n\r\nexport function isDefined<T>(data: T | undefined | null): data is T {\r\n    return data !== null && data !== undefined;\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport * as coreTypes from '@azure/functions-core';\r\n\r\nlet coreApi: typeof coreTypes | undefined | null;\r\nexport function tryGetCoreApiLazy(): typeof coreTypes | null {\r\n    if (coreApi === undefined) {\r\n        try {\r\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n            coreApi = <typeof coreTypes>require('@azure/functions-core');\r\n        } catch {\r\n            coreApi = null;\r\n        }\r\n    }\r\n    return coreApi;\r\n}\r\n","module.exports = require(\"@azure/functions-core\");","module.exports = require(\"undici\");","module.exports = require(\"url\");","module.exports = require(\"util\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nexport * as app from './app';\r\nexport { AppStartContext } from './hooks/AppStartContext';\r\nexport { AppTerminateContext } from './hooks/AppTerminateContext';\r\nexport { HookContext } from './hooks/HookContext';\r\nexport { InvocationHookContext } from './hooks/InvocationHookContext';\r\nexport { PostInvocationContext } from './hooks/PostInvocationContext';\r\nexport { PreInvocationContext } from './hooks/PreInvocationContext';\r\nexport { HttpRequest } from './http/HttpRequest';\r\nexport { HttpResponse } from './http/HttpResponse';\r\nexport * as input from './input';\r\nexport { InvocationContext } from './InvocationContext';\r\nexport * as output from './output';\r\nexport * as trigger from './trigger';\r\nexport { Disposable } from './utils/Disposable';\r\n"],"names":[],"sourceRoot":""}